<!--
Changelog
  
  2022-03-13
    Added initial changelog header

-->
<?xml version='1.0'?>
<list>
   <spell availability='all'  name='Spirit Warding I' number='101' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <cost type='mana'>1</cost>
      <bonus type='bolt-ds'>10</bonus>
      <bonus type='elemental-td'>5</bonus>
      <bonus type='spirit-td'>10</bonus>
      <bonus type='sorcerer-td'>8</bonus>
      <message type='start'>A light blue glow surrounds you\.</message>
      <message type='end'>The light blue glow leaves you\.</message>
   </spell>
   <spell availability='self-cast' name='Spirit Barrier' number='102' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <duration cast-type='target' span='stackable'>if (history = reget) and (history = history.reverse) and (line = history.find { |l| l =~ /^The air thickens and begins to swirl around you\./ }) and history[history.index(line)+2] =~ /^\s*CS: [\+\-][0-9]+ \- TD\: [\+\-][0-9]+ \+ CvA\: [\+\-][0-9]+ \+ d100\: [\+\-][0-9]+ (?:\- \+?[0-9]+ )?==? \+([0-9]+)/; ($1.to_i - 100)/60.0; else; 0.25; end</duration>
      <cost type='mana'>2 + (([Spells.minorspiritual,Stats.level].min - 2) / 6)</cost>
      <bonus type='physical-as'>0-(20+((Spells.minorspiritual-2)/2))</bonus>
      <bonus type='bolt-ds'>[20+((Spells.minorspiritual-2)/2),20].max</bonus>
      <bonus type='physical-ds'>[20+((Spells.minorspiritual-2)/2),20].max</bonus>
      <message type='start'>The air thickens and begins to swirl around you\.</message>
      <message type='end'>The air calms down around you\.</message>
   </spell>
   <spell availability='all' name='Spirit Defense' number='103' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <duration cast-type='target' span='refreshable'>20 + Spells.minorspiritual</duration>
      <cost type='mana'>3</cost>
      <bonus type='bolt-ds'>10</bonus>
      <bonus type='physical-ds'>10</bonus>
      <message type='start'>You suddenly feel more powerful\.</message>
      <message type='end'>The powerful look leaves you\.</message>
   </spell>
   <spell availability='all' name='Disease Resistance' number='104' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <cost type='mana'>4</cost>
      <message type='start'>You feel a strengthening of your internal fortitude\.</message>
      <message type='end'>You lose your extra internal fortitude\.</message>
   </spell>
   <spell availability='all' name='Poison Resistance' number='105' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <cost type='mana'>5</cost>
      <message type='start'>You feel a strengthening of your blood flow\.</message>
      <message type='end'>You notice your blood flow go back to normal\.</message>
   </spell>
   <spell availability='self-cast' name='Spirit Fog' number='106' type='defense'>
      <duration>20 + Spells.minorspiritual</duration>
      <cost type='mana'>6</cost>
   </spell>
   <spell availability='all' name='Spirit Warding II' number='107' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <cost type='mana'>7</cost>
      <bonus type='bolt-ds'>25</bonus>
      <bonus type='elemental-td'>7</bonus>
      <bonus type='spirit-td'>15</bonus>
      <bonus type='sorcerer-td'>11</bonus>
      <message type='start'>A deep blue glow surrounds you\.</message>
      <message type='end'>The deep blue glow leaves you\.</message>
   </spell>
   <spell availability='all' name='Stun Relief' number='108' type='utility'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='all' name='Dispel Invisibility' number='109' type='utility'>
      <cost type='mana'>9</cost>
   </spell>
   <spell availability='all' name='Unbalance' number='110' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='all' name='Fire Spirit' number='111' stance='yes' type='attack/utility'>
      <cost type='mana'>11</cost>
   </spell>
   <spell availability='all' name='Water Walking' number='112' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <cost type='mana'>12</cost>
      <message type='start'>A misty halo surrounds you\.</message>
      <message type='end'>The misty halo fades from you\.</message>
   </spell>
   <spell availability='all' name='Undisease' number='113' type='utility'>
      <cost type='mana'>13</cost>
   </spell>
   <spell availability='all' name='Unpoison' number='114' type='utility'>
      <cost type='mana'>14</cost>
   </spell>
   <spell availability='all' name='Fasthr&apos;s Reward' number='115' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <duration cast-type='target'>2</duration>
      <cost type='mana'>15</cost>
      <message type='start'>A dull golden nimbus surrounds you\.</message>
      <message type='end'>The dull golden nimbus fades from around you\.</message>
   </spell>
   <spell availability='all' name='Locate Person' number='116' type='utility'>
      <cost type='mana'>16</cost>
   </spell>
   <spell availability='all' name='Spirit Strike' number='117' type='offense'>
      <duration span='stackable'>2</duration>
      <cost type='mana'>17</cost>
      <bonus type='bolt-as'>75</bonus>
      <bonus type='physical-as'>75</bonus>
      <message type='start'>An invisible force guides you\.</message>
      <message type='end'>The guiding force leaves you\.</message>
   </spell>
   <spell availability='all' name='Web' number='118' stance='yes' type='attack'>
      <cost type='mana'>18</cost>
   </spell>
   <spell availability='all' name='Spirit Dispel' number='119' type='attack/utility'>
      <cost type='mana'>19</cost>
   </spell>
   <spell availability='all' name='Lesser Shroud' number='120' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.minorspiritual</duration>
      <duration cast-type='target' span='refreshable'>2</duration>
      <cost type='mana'>20 + (([[Spells.minorspiritual,Stats.level].min - 20,0].max) / 6.0).round</cost>
      <bonus type='bolt-ds'>[15+((Spells.minorspiritual-20)/2),15].max</bonus>
      <bonus type='physical-ds'>[15+((Spells.minorspiritual-20)/2),15].max</bonus>
      <bonus type='elemental-td'>10</bonus>
      <bonus type='spirit-td'>20</bonus>
      <bonus type='sorcerer-td'>15</bonus>
      <message type='start'>You suddenly feel a lot more powerful\.</message>
      <message type='end'>The very powerful look leaves you\.</message>
   </spell>
   <spell availability='all' name='Call Lightning' number='125' type='attack/utility'>
      <cost type='mana'>25</cost>
   </spell>
   <spell availability='all' name='Spirit Guide' number='130' type='utility'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='all' name='Searing Light' number='135' type='attack'>
      <cost type='mana'>35</cost>
   </spell>
   <spell availability='all' name='Wall of Force' number='140' type='defense'>
      <duration cast-type='self' span='refreshable'>1.5</duration>
      <duration cast-type='target' span='refreshable'>1</duration>
      <cost type='mana'>40</cost>
      <bonus type='bolt-ds'>100</bonus>
      <bonus type='physical-ds'>100</bonus>
      <message type='start'>A wall of force surrounds you\.</message>
      <message type='end'>The wall of force disappears from around you\.</message>
   </spell>
   <spell availability='all' name='Calm' number='201' type='attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='all' name='Spirit Shield' number='202' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20+Spells.majorspiritual</duration>
      <duration cast-type='target' span='refreshable'>20+Spells.majorspiritual</duration>
      <cost type='mana'>[2+(([Spells.majorspiritual,Stats.level].min-2)/6),2].max</cost>
      <bonus type='physical-ds'>[10+(([Spells.majorspiritual,Stats.level].min-2)/3),10].max</bonus>
      <message type='start'>A dim aura surrounds you\.</message>
      <message type='end'>The dim aura fades from around you\.</message>
   </spell>
   <spell availability='self-cast' name='Manna' number='203' type='utility'>
      <duration span='stackable'>5</duration>
      <cost type='mana'>3</cost>
      <message type='start'>The spiritual nourishment has a replenishing effect upon you\.</message>
      <message type='end'>The replenishing effect fades, but you are left with a feeling of wellbeing\.</message>
   </spell>
   <spell availability='all' name='Unpresence' number='204' type='utility'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.majorspiritual</duration>
      <duration cast-type='target' span='refreshable'>20 + Spells.majorspiritual</duration>
      <cost type='mana'>4</cost>
      <message type='start'>You feel more secure\.</message>
      <message type='end'>You feel less secure\.</message>
   </spell>
   <spell availability='all' name='Light' number='205' type='utility'>
      <cost type='mana'>5</cost>
   </spell>
   <spell availability='self-cast' name='Tend Lore' number='206' type='utility'>
      <duration cast-type='self' span='refreshable'>1</duration>
      <cost type='mana'>6</cost>
      <message type='start'>You feel a knowledge of the treatment of injuries flow through you\.</message>
      <message type='end'>You feel the knowledge of the treatment of injuries dissipate\.</message>
   </spell>
   <spell availability='all' name='Purify Air' number='207' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.majorspiritual</duration>
      <duration cast-type='target' span='refreshable'>20 + Spells.majorspiritual</duration>
      <cost type='mana'>7</cost>
      <message type='start'>You begin to breathe more deeply\.</message>
      <message type='end'>Your breathing becomes more shallow\.</message>
   </spell>
   <spell availability='all' name='Living Spell' number='208' type='attack/utility'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='self-cast' name='Untrammel' number='209' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.majorspiritual</duration>
      <cost type='mana'>9</cost>
      <message type='start'>A faint slick sheen makes the air about you visible for the briefest of moments, then sinks into you and disappears\.</message>
      <message type='end'>The air shivers about you, glistening faintly before stilling to normalcy\.</message>
   </spell>
   <spell availability='all' name='Silence' number='210' type='attack' incant='no'>
      <duration cast-type='target'>if (history = reget) and (history = history.reverse) and (line = history.index { |l| l =~ /^A pall of silence settles over you\./ }) and history[history.index(line)+2] =~ /^\s*CS: [\+\-][0-9]+ \- TD\: [\+\-][0-9]+ \+ CvA\: [\+\-][0-9]+ \+ d100\: [\+\-][0-9]+ (?:\- \+?[0-9]+ )?==? \+([0-9]+)/; 0.5 + ($1.to_i - 100)/60.0; else; 0.25; end</duration>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='group' name='Bravery' number='211' type='offense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.majorspiritual</duration>
      <duration cast-type='target' span='refreshable'>1</duration>
      <cost type='mana'>11</cost>
      <bonus type='bolt-as'>15</bonus>
      <bonus type='physical-as'>15</bonus>
      <message type='start'>You (?:and your group stand tall and )?feel more confident\.</message>
      <message type='end'>You feel less confident\.</message>
   </spell>
   <spell availability='all' name='Interference' number='212' type='attack'>
      <cost type='mana'>12</cost>
      <message type='end'>The distracting force passes away from you\.</message>
   </spell>
   <spell availability='all' name='Minor Sanctuary' number='213' type='utility'>
      <cost type='mana'>13</cost>
   </spell>
   <spell availability='all' name='Bind' number='214' type='attack'>
      <cost type='mana'>14</cost>
      <duration cast-type='target' span='stackable'>if (history = reget) and (history = history.reverse) and (line = history.index { |l| l =~ /^An unseen force envelops you, restricting all movement\./ }) and history[history.index(line)+2] =~ /^\s*CS: [\+\-][0-9]+ \- TD\: [\+\-][0-9]+ \+ CvA\: [\+\-][0-9]+ \+ d100\: [\+\-][0-9]+ (?:\- \+?[0-9]+ )?==? \+([0-9]+)/; 13 + ($1.to_i - 100)/60.0; else; 0.25; end</duration>
      <duration cast-type='self' span='stackable'>if (history = reget) and (history = history.reverse) and (line = history.index { |l| l =~ /^An unseen force envelops you, restricting all movement\./ }) and history[history.index(line)+2] =~ /^\s*CS: [\+\-][0-9]+ \- TD\: [\+\-][0-9]+ \+ CvA\: [\+\-][0-9]+ \+ d100\: [\+\-][0-9]+ (?:\- \+?[0-9]+ )?==? \+([0-9]+)/; 13 + ($1.to_i - 100)/60.0; else; 0.25; end</duration>
      <message type='start'>An unseen force envelops you, restricting all movement\.</message>
      <message type='end'>The restricting force that envelops you dissolves away\.</message>
   </spell>
   <spell availability='group' name='Heroism' number='215' type='offense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.majorspiritual</duration>
      <duration cast-type='target' span='refreshable'>1</duration>
      <cost type='mana'>15 + (Skills.slblessings / 30.0).round</cost>
      <bonus type='bolt-as'>25+(Skills.slblessings/10)</bonus>
      <bonus type='physical-as'>25+(Skills.slblessings/10)</bonus>
      <message type='start'>A brilliant aura surrounds you and (?:sinks into your skin|your group)\.  You feel charged with extra vitality\.</message>
      <message type='end'>The brilliant aura fades away from you\.</message>
   </spell>
   <spell availability='all' name='Frenzy' number='216' type='attack'>
      <cost type='mana'>16</cost>
   </spell>
   <spell availability='all' name='Mass Interference' number='217' type='attack' incant='no'>
      <cost type='mana'>17</cost>
   </spell>
   <spell availability='self-cast' name='Spirit Servant' number='218' type='utility'>
      <duration span='refreshable'>20 + Spells.majorspiritual</duration>
      <cost type='mana'>18</cost>
      <message type='start'>A bright pulse of soft energy moves away from your hands and beckons a spirit to your aid\.\.\.</message>
      <message type='start'>You infuse your .*?spirit with the mana necessary to maintain its corporeal form\.</message>
      <message type='end'>(?:An?|The).*? spirit fades into ethereal form and wafts away\.</message>
   </spell>
   <spell availability='group' name='Spell Shield' number='219' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.majorspiritual</duration>
      <duration cast-type='target' span='refreshable'>2</duration>
      <cost type='mana'>19</cost>
      <bonus type='bolt-ds'>30</bonus>
      <bonus type='spirit-td'>30</bonus>
      <message type='start'>An opalescent aura surrounds you(?: and your group)?\.</message>
      <message type='end'>The opalescent aura fades from around you\.</message>
   </spell>
   <spell availability='self-cast' name='Major Sanctuary' number='220' type='utility'>
      <duration>10 + (Spells.majorspiritual/2.0)</duration>
      <cost type='mana'>20</cost>
      <message type='start'>A brilliant light bathes you as your surroundings blur for a moment\.\.\.</message>
      <message type='start'>Whipping winds carry the hot, metallic taste of lightning to you as your surroundings blur\.\.\.</message>
      <message type='start'>A deep shadow descends upon you and your breath is briefly muffled as your vision blurs with darkness\.\.\.</message>
      <message type='start'>A shiver of wind touches your breath and you feel your eyelashes grow thick with a coating of snow\.  You lift your eyes to the sky and white blurs your vision\.\.\.</message>
      <message type='end'>A bright light surrounds you and your visions of sanctuary slowly fade\.\.\.</message>
      <message type='end'>The blinding flash of lightning shatters the chamber in a cloud of wind and light, causing it to dissolve around you\.\.\.</message>
      <message type='end'>Suddenly the candles at the heart of the room go out and you are plunged into a deep darkness that obscures your vision of the world around you\.\.\.</message>
      <message type='end'>Rising suddenly, the chill air sends a flurry of snow towards you and your vision swims with white flakes\.\.\.</message>
   </spell>
   <spell availability='all' name='Transference' number='225' type='utility'>
      <cost type='mana'>25</cost>
   </spell>
   <spell availability='all' name='Spiritual Abolition' number='230' type='attack'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='self-cast' name='Spirit Slayer' number='240' type='offense'>
      <duration span='refreshable'>0.5</duration>
      <cost type='mana'>40</cost>
      <message type='start'>A small mote of bright white light swirls into existence around you\.</message>
      <message type='start'>A pulse of bright white light flows from your hand into the mote\.  You feel the spirit's presence grow stronger\.</message>
      <message type='end'>The mote of white light next to you disappears\.</message>
   </spell>
   <spell availability='all' name='Prayer of Holding' number='301' type='attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='all' channel='yes' name='Smite' number='302' type='attack'>
      <cost type='mana'>4</cost>
   </spell>
   <spell availability='all' name='Prayer of Protection' number='303' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.cleric</duration>
      <duration cast-type='target' span='refreshable'>2</duration>
      <cost type='mana'>3 + [(([Spells.cleric,Stats.level].min - 3) / 6),0].max</cost>
      <bonus type='bolt-ds'>[10+(([Spells.cleric,Stats.level].min - 3)/2),10].max</bonus>
      <bonus type='physical-ds'>[10+(([Spells.cleric,Stats.level].min - 3)/2),10].max</bonus>
      <message type='start'>A pure white aura sparkles around you\.</message>
      <message type='end'>A white glow rushes away from you\.</message>
   </spell>
   <spell availability='all' name='Bless Item' number='304' type='utility'>
      <cost type='mana'>4</cost>
   </spell>
   <spell availability='all' name='Preservation' number='305' type='utility'>
      <cost type='mana'>5</cost>
   </spell>
   <spell availability='all' name='Holy Bolt' number='306' stance='yes' type='attack'>
      <cost type='mana'>6</cost>
   </spell>
   <spell availability='group' name='Benediction' number='307' type='offense/defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.cleric</duration>
      <duration cast-type='target' span='refreshable'>20 + Spells.cleric</duration>
      <cost fixme='extra cost when in group' type='mana'>7+[([Spells.cleric, 27].min-7)/2,0].max + [([Stats.level, Spells.cleric].min-27)/2, 0].max</cost>
      <bonus type='bolt-as'>5+[([Spells.cleric,Stats.level].min-7)/2,0].max</bonus>
      <bonus type='physical-as'>[[5+((Spells.cleric-7)/2),5].max,15].min</bonus>
      <bonus type='physical-ds'>[[5+((Spells.cleric-7)/2),5].max,15].min</bonus>
      <message type='start'>Your spirit is bolstered by a great sense of faith and conviction\.</message>
      <message type='end'>Your sense of faith and conviction wanes\.(?:  You are less sure of yourself\.)?</message>
   </spell>
   <spell availability='all' name='Well of Life' number='308' type='utility'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='all' name='Condemn' number='309' type='attack'>
      <cost type='mana'>9</cost>
   </spell>
   <spell availability='group' name='Warding Sphere' number='310' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.cleric</duration>
      <duration cast-type='target' span='refreshable'>20 + Spells.cleric</duration>
      <cost type='mana'>10 + [[(Spells.cleric - 10)/2, 10].min,0].max</cost>
      <bonus type='bolt-ds'>(10+[([Spells.cleric-10,0].max/2),10].min)</bonus>
      <bonus type='physical-ds'>(10+[([Spells.cleric-10,0].max/2),10].min)</bonus>
      <bonus type='elemental-td'>(10+[([Spells.cleric-10,0].max/2),10].min/2).to_i</bonus>
      <bonus type='spirit-td'>(10+[([Spells.cleric-10,0].max/2),10].min).to_i</bonus>
      <bonus type='sorcerer-td'>((10+[([Spells.cleric-10,0].max/2),10].min)*0.75).to_i</bonus>
      <message type='start'>You feel more secure basking in the glow of divine protection\.</message>
      <message type='end'>You suddenly feel less protected\.</message>
   </spell>
   <spell availability='all' name='Blind' number='311' type='attack'>
      <cost type='mana'>11</cost>
   </spell>
   <spell availability='all' channel='yes' name='Fervent Reproach' number='312' type='attack'>
      <cost type='mana'>12</cost>
   </spell>
   <spell availability='self-cast' name='Prayer' number='313' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.cleric</duration>
      <cost type='mana'>13 + ((if [Spells.cleric,Stats.level].min &gt; 35 then [Spells.cleric,Stats.level].min - 35 else 0 end) / 3)</cost>
      <bonus type='bolt-ds'>if Spells.cleric &gt; 34 then ([Spells.cleric,Stats.level].min - 25) else 0 end</bonus>
      <bonus type='physical-ds'>if Spells.cleric &gt; 34 then ([Spells.cleric,Stats.level].min - 25) else 0 end</bonus>
      <bonus type='elemental-td'>5</bonus>
      <bonus type='spirit-td'>10</bonus>
      <bonus type='sorcerer-td'>7</bonus>
      <message type='start'>Turning your thoughts inward\, you ask for the .* of your deity to protect you\.\s+.+, and you sense that your prayer has been granted\.</message>
      <message type='end'>You feel the protection of your deity&apos;s influence fade\.</message>
   </spell>
   <spell availability='all' name='Relieve Burden' number='314' type='utility'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.cleric</duration>
      <duration cast-type='target' span='refreshable'>2</duration>
      <cost type='mana'>c = 14; r = 0; s = 4; c += 0.5 while (Skills.slblessings &gt;= (r += (s += 1))); c</cost>
      <message type='start'>A glittering golden collection bowl materializes above you\.  It slowly tips upside down, causing a shower of silver sparks to rain down upon your body, then vanishes\.</message>
      <message type='end'>An ethereal golden collection bowl drifts out of your body, then vanishes\.</message>
   </spell>
   <spell availability='all' name='Remove Curse' number='315' type='utility'>
      <cost type='mana'>15</cost>
   </spell>
   <spell availability='all' name='Censure' number='316' type='attack' incant='no'>
      <cost type='mana'>16</cost>
   </spell>
   <spell availability='all' channel='yes' name='Divine Fury' number='317' type='attack'>
      <cost type='mana'>17</cost>
   </spell>
   <spell availability='all' name='Raise Dead' number='318' type='utility'>
      <cost type='mana'>if Spells.cleric &gt;= 40 then 40 elsif Spells.cleric &gt;= 25 then 25 else 18 end</cost>
      <cost type='spirit'>if Spells.cleric &gt;= 40 then 3 elsif Spells.cleric &gt;= 25 then 5 else 8 end</cost>
   </spell>
   <spell availability='self-cast' name='Soul Ward' number='319' type='defense'>
      <cost type='mana'>19</cost>
      <duration span='stackable' multicastable='yes'>20 + Spells.cleric</duration>
      <message type='start'>Drawing deep from the well of your soul, you summon forth a thread of your essence and weave it into an evanescent shield to shroud your form\.</message>
      <message type='end'>The air about you shimmers momentarily before the evanescent shield surrounding you collapses\.</message>
   </spell>
   <spell availability='self-cast' name='Ethereal Censer' number='320' type='offensive/utility'>
      <cost type='mana'>20</cost>
      <duration span='refreshable' max='0.5'>0.5</duration>
      <message type='start'>Mana swirls into the visible spectrum and manifests as an ethereal, [\w\s]+ censer swinging pendulously through the air beside you\.  A [\w\s]+ haze of incense smoke trails in its wake, quickly spreading in sinuous tendrils through the area\.</message>
      <message type='end'>Your ethereal censer fades away, leaving only a faint lingering scent of incense\.</message>
   </spell>
   <spell availability='all' name='Divine Wrath' number='335' type='attack' incant='no'>
      <cost type='mana'>35</cost>
   </spell>
   <spell availability='all' name='Holy Receptacle' number='325' type='utility'>
      <cost type='mana'>25</cost>
   </spell>
   <spell availability='all' name='Prayer of Communion' number='330' type='utility'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='all' name='Symbol of the Proselyte' number='340' type='utility'>
      <cost type='mana'>40</cost>
      <cost type='spirit'>2</cost>
   </spell>
   <spell availability='all' name='Miracle' number='350' type='utility'>
      <cost type='mana'>50</cost>
   </spell>
   <spell availability='self-cast' name='Ethereal Censer Cooldown' number='399' type="timer">
      <duration max='0.5'>0.5</duration>
      <message type='start'>As the fragrant haze settles over you, you feel revitalized\.</message>
      <message type='end'>You sense the flows of mana around you are once again strong enough to support the manifestation of an ethereal censer\.</message>
   </spell>
   <spell availability='all' name='Elemental Defense I' number='401' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorelemental</duration>
      <cost type='mana'>1</cost>
      <bonus type='bolt-ds'>5</bonus>
      <bonus type='physical-ds'>5</bonus>
      <bonus type='elemental-td'>5</bonus>
      <bonus type='spirit-td'>2</bonus>
      <bonus type='sorcerer-td'>4</bonus>
      <message type='start'>A silvery luminescence surrounds you\.</message>
      <message type='end'>The silvery luminescence fades from around you\.</message>
   </spell>
   <spell availability='self-cast' name='Presence' number='402' type='utility'>
      <duration span='refreshable' max='5'>5</duration>
      <cost type='mana'>2</cost>
      <message type='start'>You continue to feel much more aware of your surroundings\.</message>
      <message type='end'>Your senses are no longer as sharp\.</message>
   </spell>
   <spell availability='all' name='Lock Pick Enhancement' number='403' type='utility'>
      <duration span='stackable'>0.5 + Stats.level / 60.0</duration>
      <cost type='mana'>3</cost>
      <message type='start'>A scintillating light surrounds your hands\.</message>
      <message type='end'>The scintillating light fades from your hands\.</message>
   </spell>
   <spell availability='all' name='Disarm Enhancement' number='404' type='utility'>
      <duration span='stackable'>0.5 + Stats.level / 60.0</duration>
      <cost type='mana'>4</cost>
      <message type='start'>You become calm and focused\.</message>
      <message type='end'>The focused look leaves you\.</message>
   </spell>
   <spell availability='all' name='Elemental Detection' number='405' type='utility'>
      <cost type='mana'>5</cost>
   </spell>
   <spell availability='all' name='Elemental Defense II' number='406' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorelemental</duration>
      <cost type='mana'>6</cost>
      <bonus type='bolt-ds'>10</bonus>
      <bonus type='physical-ds'>10</bonus>
      <bonus type='elemental-td'>10</bonus>
      <bonus type='spirit-td'>5</bonus>
      <bonus type='sorcerer-td'>8</bonus>
      <message type='start'>A bright luminescence surrounds you\.</message>
      <message type='end'>The bright luminescence fades from around you\.</message>
   </spell>
   <spell availability='all' name='Unlock' number='407' type='utility'>
      <cost type='mana'>7</cost>
   </spell>
   <spell availability='all' name='Disarm' number='408' type='utility'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='all' name='Elemental Blast' number='409' type='attack'>
      <cost type='mana'>7</cost>
   </spell>
   <spell availability='all' name='Elemental Wave' number='410' type='attack/area' incant='no'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='all' name='Elemental Blade' number='411' type='utility'>
      <cost type='mana'>11</cost>
   </spell>
   <spell availability='all' name='Weapon Deflection' number='412' type='attack'>
      <cost type='mana'>12</cost>
   </spell>
   <spell availability='all' name='Elemental Saturation' number='413' type='attack'>
      <cost type='mana'>13</cost>
   </spell>
   <spell availability='all' name='Elemental Defense III' number='414' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorelemental</duration>
      <cost type='mana'>14</cost>
      <bonus type='bolt-ds'>20</bonus>
      <bonus type='physical-ds'>20</bonus>
      <bonus type='elemental-td'>15</bonus>
      <bonus type='spirit-td'>7</bonus>
      <bonus type='sorcerer-td'>10</bonus>
      <message type='start'>A brilliant luminescence surrounds you(?: and your group)?\.</message>
      <message type='end'>The brilliant luminescence fades from around you\.</message>
   </spell>
   <spell availability='all' name='Elemental Strike' number='415' type='attack'>
      <cost type='mana'>15</cost>
   </spell>
   <spell availability='all' name='Piercing Gaze' number='416' type='utility'>
      <cost type='mana'>16</cost>
   </spell>
   <spell availability='all' name='Elemental Dispel' number='417' type='attack/utility'>
      <cost type='mana'>17</cost>
   </spell>
   <spell availability='all' name='Mana Focus' number='418' type='utility'>
      <cost type='mana'>18</cost>
   </spell>
   <spell availability='group' name='Mass Elemental Defense' number='419' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorelemental</duration>
      <cost type='mana'>19</cost>
   </spell>
   <spell availability='all' name='Magic Item Creation' number='420' type='utility'>
      <cost type='mana'>20</cost>
   </spell>
   <spell availability='self-cast' name='Elemental Targeting' number='425' type='offense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorelemental</duration>
      <cost type='mana'>25</cost>
      <bonus type='bolt-as'>[25+((Spells.minorelemental-25)/2),50].min</bonus>
      <bonus type='physical-as'>[25+((Spells.minorelemental-25)/2),50].min</bonus>
      <bonus type='elemental-cs'>[25+((Spells.minorelemental-25)/2),50].min</bonus>
      <bonus type='sorcerer-cs'>[25+((Spells.minorelemental-25)/2),50].min/2</bonus>
      <message type='start'>You are filled with a sense of great confidence\.</message>
      <message type='end'>You feel less confident than before\.</message>
   </spell>
   <spell availability='self-cast' name='Elemental Barrier' number='430' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minorelemental</duration>
      <cost type='mana'>30</cost>
      <bonus type='bolt-ds'>[(Spells.minorelemental/2),50].min</bonus>
      <bonus type='physical-ds'>[(Spells.minorelemental/2),50].min</bonus>
      <bonus type='elemental-td'>[(Spells.minorelemental/2),50].min</bonus>
      <bonus type='spirit-td'>([(Spells.minorelemental/2),50].min/2).to_i</bonus>
      <bonus type='sorcerer-td'>([(Spells.minorelemental/2),50].min*0.75).to_i</bonus>
      <message type='start'>Your skin tingles for a moment and you feel more secure\.</message>
      <message type='end'>The tingling sensation and sense of security leaves you\.</message>
   </spell>
   <spell availability='all' name='Major Elemental Wave' number='435' type='attack/area' incant='no'>
      <cost type='mana'>35</cost>
   </spell>
   <spell availability='all' name='Mana Focus Water Bonus' number='499' type='utility'>
   </spell>
   <spell availability='all' name='Sleep' number='501' type='attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='all' name='Chromatic Circle' number='502' type='attack'>
      <cost type='mana'>2</cost>
   </spell>
   <spell availability='all' name='Thurfel&apos;s Ward' number='503' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.majorelemental</duration>
      <cost cast-type='self' type='mana'>3 + (([Spells.majorelemental,Stats.level].min - 3) / 12.0).round</cost>
      <cost cast-type='target' type='mana'>3</cost>
      <bonus type='bolt-ds'>[20+((Spells.majorelemental-5)/4),20].max</bonus>
      <bonus type='physical-ds'>[20+((Spells.majorelemental-5)/4),20].max</bonus>
      <message type='start'>Glowing specks of \w+ \w+ energy begin to spin around you\.</message>
      <message type='end'>The glowing specks of energy surrounding you suddenly shoot off in all directions, then quickly fade away\.</message>
   </spell>
   <spell availability='all' name='Slow' number='504' type='attack'>
      <cost type='mana'>4</cost>
   </spell>
   <spell availability='all' name='Hand of Tonis' number='505' stance='yes' type='attack'>
      <cost type='mana'>5</cost>
   </spell>
   <spell availability='all' name='Celerity' number='506' type='utility'>
      <duration span='refreshable'>1</duration>
      <cost type='mana'>6</cost>
      <message type='start'>You (?:and your group )?suddenly start moving light\-footedly\.</message>
      <message type='end'>You suddenly feel less light\-footed\.</message>
   </spell>
   <spell availability='self-cast' name='Elemental Deflection' number='507' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.majorelemental</duration>
      <cost type='mana'>7+(([Spells.majorelemental,Stats.level].min-7)/6)</cost>
      <bonus type='bolt-ds'>[20+((Spells.majorelemental-7)/2),20].max</bonus>
      <bonus type='physical-ds'>[20+((Spells.majorelemental-7)/2),20].max</bonus>
      <message type='start'>You are surrounded by a shimmering field of energy\.</message>
      <message type='end'>You feel a slight tingling as the shimmering field fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Elemental Bias' number='508' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.majorelemental</duration>
      <cost type='mana'>8</cost>
      <bonus type='elemental-td'>20</bonus>
      <bonus type='spirit-td'>10</bonus>
      <bonus type='sorcerer-td'>15</bonus>
      <message type='start'>You feel more magically aware\.</message>
      <message type='end'>You feel your extra magical awareness leave you\.</message>
   </spell>
   <spell availability='all' name='Strength' number='509' type='offense/utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.majorelemental</duration>
      <cost type='mana'>9</cost>
      <bonus type='physical-as'>15 + (n=0; [4,9,15,22,30,39,49,60,72,85,99,114,130,147,165,184].each{ |limit| if Skills.elearth &gt;= limit then n += 1 end }; n;)</bonus>
      <bonus type='strength'>15</bonus>
      <message type='start'>You feel much stronger\.</message>
      <message type='end'>You feel your extra strength departing\.</message>
   </spell>
   <spell availability='all' name='Hurl Boulder' number='510' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='all' name='Floating Disk' number='511' type='utility'>
      <cost type='mana'>11</cost>
   </spell>
   <spell availability='all' name='Cold Snap' number='512' type='attack'>
      <cost type='mana'>12</cost>
   </spell>
   <spell availability='self-cast' name='Elemental Focus' number='513' type='offense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.majorelemental</duration>
      <duration cast-type='target' span='stackable'>if (history = reget) and (history = history.reverse) and (line = history.index { |l| l =~ /^You bristle with energy\./ }) and history[history.index(line)+2] =~ /^\s*CS: [\+\-][0-9]+ \- TD\: [\+\-][0-9]+ \+ CvA\: [\+\-][0-9]+ \+ d100\: [\+\-][0-9]+ (?:\- \+?[0-9]+ )?==? \+([0-9]+)/; ($1.to_i - 100)/120.0; else; 0.25; end</duration>
      <cost type='mana'>13 + (([Spells.majorelemental,Stats.level].min - 13)/2)</cost>
      <bonus type='bolt-as'>[20+(([Spells.majorelemental,Stats.level].min-13)/2),20].max</bonus>
      <bonus type='physical-as'>-40</bonus>
      <message type='start'>You bristle with energy\.</message>
      <message type='end'>You no longer bristle with energy\.</message>
   </spell>
   <spell availability='all' name='Stone Fist' number='514' type='attack'>
      <cost type='mana'>14</cost>
   </spell>
   <spell availability='all' name='Rapid Fire' number='515' type='utility'>
      <duration>1</duration>
      <cost type='mana'>15</cost>
      <message type='start'>You feel the magic surge through you\.</message>
      <message type='end'>You feel the surge of magic depart\.</message>
   </spell>
   <spell availability='all' name='Mana Leech' number='516' type='attack/utility'>
      <cost type='mana'>16</cost>
   </spell>
   <spell availability='all' name='Charge Item' number='517' type='utility'>
      <cost type='mana'>17</cost>
   </spell>
   <spell availability='all' name='Cone of Elements' number='518' channel='yes' stance='yes' type='attack/area' incant='no'>
      <cost type='mana'>18</cost>
   </spell>
   <spell availability='all' name='Immolation' number='519' type='attack'>
      <cost type='mana'>19</cost>
   </spell>
   <spell availability='self-cast' name='Mage Armor' number='520' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + [Spells.majorelemental,Stats.level].min</duration>
      <cost type='mana'>20</cost>
      <cast-proc>if defined?(target) and not target.nil?; cmd = &quot;incant 520 #{target}&quot;; else; cmd=&quot;incant 520 #{UserVars.element}&quot;; end; dothistimeout(&apos;release&apos;, 5, /^You feel the magic of your spell rush away from you\.$|^You don&apos;t have a prepared spell to release!$/) if (checkprep != &apos;Mage Armor&apos;) and (checkprep != &apos;None&apos;); dothistimeout(cmd, 5, /^A layer of raw elemental energy forms around you|^You already have a different spell readied|^Cast Roundtime [0-9]+ Seconds?\.|^But you don&apos;t have any mana!|^\[Spell Hindrance for|keeps? the spell from working\.|^As you focus on your magic, your vision swims with a swirling haze of crimson\.|^Your magic fizzles ineffectually\.|^All you manage to do is cough up some blood\.|^And give yourself away!  Never!|^You are unable to do that right now\.|^You don&apos;t seem to be able to move to do that\.|^You can&apos;t think clearly enough to prepare a spell!/)</cast-proc>
      <message type='start'>A layer of raw elemental energy forms around you\.</message>
      <message type='end'>The layer of raw elemental energy surrounding you dissipates\.</message>
   </spell>
   <spell availability='all' name='Meteor Swarm' number='525' type='attack' incant='no'>
      <cost type='mana'>25</cost>
   </spell>
   <spell availability='all' name='Elemental Disjunction' number='530' type='attack'>
      <cost type='mana'>30</cost>
   </spell>
    <spell availability='self-cast' name='Haste' number='535' type='utility'>
      <duration span='stackable'>20 + [Spells.majorelemental, Stats.level].min</duration>
      <cost type='mana'>35</cost>
      <message type='start'>You begin to notice the world slow down around you\.  Strange\.</message>
      <message type='start'>The world stutters around you for a moment, then resumes its slower speed\.</message>
      <message type='end'>You notice that things have returned to their normal speed\.</message>
   </spell>
   <spell availability='self-cast' name='Temporal Reversion' number='540' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.majorelemental</duration>
      <cost type='mana'>40</cost>
      <message type='start'>For a moment, everything you hear and see echoes weirdly around you, but then everything seems normal again\.  Your personal temporal reality has been slightly offset from the true flow of time\.</message>
      <message type='end'>Abruptly, everything you see and hear comes into better focus\.  Your personal temporal reality has rejoined the true flow of time\.</message>
   </spell>
  <spell availability='self-cast' name='Rapid Fire Penalty' number='597' type='timer'>
      <duration>1</duration>
      <message type='start'>You feel the magic surge through you, but the feeling of fatigue lingers\.</message>
   </spell>
  <spell availability='self-cast' name='Celerity Recovery' number='598'>
      <duration>3</duration>
      <message type='start'>You suddenly feel less light\-footed and your feet take on a leaden quality\.</message>
      <message type='end'>The leaden quality leaves your feet\.</message>
  </spell>
  <spell availability='self-cast' name='Rapid Fire Recovery' number='599'>
      <duration>if Skills.emc >= 199; 0; else; 1 + (((90 - (Skills.emc/2.2)).ceil + 1) / 60.0); end</duration>
      <message type='end'>You notice the feeling of elemental fatigue fade away\.</message>
      <message type="end">Moisture beads on the surface of your skin then evaporates away, taking with it your recent elemental fatigue\.</message>
   </spell>
   <spell availability='all' name='Natural Colors' number='601' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>1</cost>
      <bonus type='bolt-ds'>bonus = 10; [5, 11, 18, 26, 35, 45, 56, 68, 81, 95].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus</bonus>
      <bonus type='physical-ds'>bonus = 10; [5, 11, 18, 26, 35, 45, 56, 68, 81, 95].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus</bonus>
      <message type='start'>You(?: and your group)? seem to blend into the surroundings better\.</message>
      <message type='end'>You return to normal color\.</message>
   </spell>
   <spell availability='all' name='Resist Elements' number='602' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>2</cost>
      <bonus type='bolt-ds'>bonus = 15; [5, 11, 18, 26, 35, 45, 56, 68, 81, 95].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus</bonus>
      <message type='start'>The air about you shimmers slightly\.</message>
      <message type='end'>The air about you stops shimmering\.</message>
   </spell>
   <spell availability='all' name='Wild Entropy' number='603' type='attack'>
      <cost type='mana'>3</cost>
   </spell>
   <spell availability='self-cast' name='Nature&apos;s Bounty' number='604' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>4</cost>
      <message type='start'>You feel your vision sharpen\.|You feel more in tune with the natural surroundings\.</message>
      <message type='end'>You feel your vision return to normal\.|You feel less in tune with your natural surroundings\.</message>
   </spell>
   <spell availability='self-cast' name='Barkskin' number='605' type='defense'>
      <duration span='refreshable' multicastable='no'>1</duration>
      <cost type='mana'>5</cost>
      <message type='start'>A knobby layer of bark swiftly forms on you\.</message>
      <message type='end'>The knobby layer of bark on you creaks and twists briefly before disintegrating.\.</message>
   </spell>
   <spell availability='self-cast' name='Phoen&apos;s Strength' number='606' type='offense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>6</cost>
      <bonus type='physical-as'>10</bonus>
      <bonus type='strength'>10</bonus>
      <message type='start'>Your body suddenly fills with a warm strength\.</message>
      <message type='end'>You feel the inner strength leave you\.</message>
   </spell>
   <spell availability='all' name='Sounds' number='607' type='attack'>
      <cost type='mana'>7</cost>
   </spell>
   <spell availability='all' name='Camouflage' number='608' type='offense'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='all' name='Sun Burst' number='609' type='attack/utility' incant='no'>
      <cost type='mana'>9</cost>
   </spell>
   <spell availability='all' name='Tangleweed' number='610' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='all' name='Moonbeam' number='611' type='attack'>
      <cost type='mana'>11</cost>
   </spell>
   <spell availability='self-cast' name='Breeze' number='612' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>12</cost>
      <message type='start'>A breeze stirs the air about you, swirling and tugging at your clothing\.</message>
      <message type='end'>The swirling breeze around you finally settles\.</message>
   </spell>
   <spell availability='self-cast' name='Self Control' number='613' type='defense/utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>13</cost>
      <bonus type='physical-ds'>[20+((Spells.ranger-13)/2),20].max</bonus>
      <bonus type='elemental-td'>bonus = 20; [5, 11, 18, 26, 35, 45, 56, 68, 81, 95].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus/2</bonus>
      <bonus type='spirit-td'>bonus = 20; [5, 11, 18, 26, 35, 45, 56, 68, 81, 95].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus</bonus>
      <bonus type='sorcerer-td'>bonus = 20; [5, 11, 18, 26, 35, 45, 56, 68, 81, 95].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; (bonus*0.75).to_i</bonus>
      <message type='start'>You feel an aura of natural confidence surrounding you\.</message>
      <message type='end'>You feel the aura of confidence leave you\.</message>
   </spell>
   <spell availability='all' name='Imbue' number='614' type='utility'>
      <cost type='mana'>14</cost>
   </spell>
   <spell availability='all' name='Call Swarm' number='615' type='attack'>
      <cost type='mana'>15</cost>
   </spell>
   <spell availability='all' name='Spike Thorn' number='616' type='attack'>
      <cost type='mana'>16</cost>
   </spell>
   <spell availability='self-cast' name='Sneaking' number='617' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>17</cost>
      <message type='start'>You begin to move with cat-like grace\.</message>
      <message type='end'>You are no longer moving silently\.</message>
   </spell>
   <spell availability='all' name='Mobility' number='618' type='defense/utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>18+((Spells.ranger-18)/5)</cost>
      <bonus type='dodging'>[20+(Spells.ranger-18),20].max</bonus>
      <message type='start'>You suddenly feel much more dextrous\.</message>
      <message type='end'>You no longer feel so dextrous\.</message>
   </spell>
   <spell availability='all' name='Mass Calm' number='619' type='attack' incant='no'>
      <cost type='mana'>19</cost>
   </spell>
   <spell availability='self-cast' name='Resist Nature' number='620' type='defense'>
      <duration cast-type='self' span='refreshable'>20 + Spells.ranger</duration>
      <cost type='mana'>20</cost>
      <message type='start'>You call upon the natural energies of your surroundings and, with faintly visible (?:green-gold|red-gold|frosty white|blue-violet|misty grey) filaments, weave a web of protection against (?:nature|heat|cold|lightning|steam).</message>
      <message type='end'>The (?:green-gold|red-gold|frosty white|blue-violet|misty grey) web of protection against (?:nature|heat|cold|lightning|steam) falls away from you, unraveling as it fades.</message>
   </spell>
   <spell availability='self-cast' name='Nature&apos;s Touch' number='625' type='defense/utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>25</cost>
      <bonus type='elemental-td'>([1+((Spells.ranger-25)/2),12].min/2).to_i</bonus>
      <bonus type='spirit-td'>[1+((Spells.ranger-25)/2),12].min</bonus>
      <bonus type='sorcerer-td'>([1+((Spells.ranger-25)/2),12].min*0.75).to_i</bonus>
      <message type='start'>You suddenly feel the power of nature surround you\.</message>
      <message type='end'>You feel the gathering of nature&apos;s power leave you\.</message>
   </spell>
   <spell availability='all' name='Animal Companion' number='630' type='attack/utility'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='all' name='Nature&apos;s Fury' number='635' type='attack' incant='no'>
      <cost type='mana'>35</cost>
   </spell>
   <spell availability='self-cast' name='Wall of Thorns' number='640' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.ranger</duration>
      <cost type='mana'>40</cost>
      <bonus type='bolt-ds'>20</bonus>
      <bonus type='physical-ds'>20</bonus>
      <message type='start'>You are surrounded by a (?:dense, )?writhing barrier of sharp thorns\.</message>
      <message type='end'>You seem to lose the thorny barrier that surrounds you\.</message>
   </spell>
   <spell availability='self-cast' name='Assume Aspect' number='650' type='utility'>
      <duration>10</duration>
      <cost type='mana'>50</cost>
      <message type='start'>Gold-traced pale green ribbons of energy swirl about and coalesce upon you, reinforcing the intense natural prowess that races through every fiber of your being\.</message>
      <message type='end'>The green and gold energy fades from around you, bringing your awareness of nature to its original state\.</message>
   </spell>
   <spell availability='all' name='Blood Burst' number='701' type='attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='all' channel='yes' name='Mana Disruption' number='702' type='attack'>
      <cost type='mana'>2</cost>
   </spell>
   <spell availability='all' name='Corrupt Essence' number='703' type='attack'>
      <duration>0.33</duration>
      <cost type='mana'>3</cost>
      <message type='start'>You feel weakened as a blood red haze forms around you\.</message>
      <message type='end'>The blood red haze dissipates from around you\.</message>
   </spell>
   <spell availability='all' name='Phase' number='704' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.sorcerer</duration>
      <cost type='mana'>4</cost>
      <message type='start'>A wave of tingling passes across your body, momentarily casting it into semi-transparency\.</message>
      <message type='end'>Your body pulses momentarily into semi transparency and then returns to normal\.</message>
   </spell>
   <spell availability='all' channel='yes' name='Disintegrate' number='705' type='attack'>
      <cost type='mana'>5</cost>
   </spell>
   <spell availability='all' name='Mind Jolt' number='706' type='attack'>
      <cost type='mana'>6</cost>
   </spell>
   <spell availability='all' name='Eye Spy' number='707' type='utility'>
      <duration span='refreshable'>19 + Spells.sorcerer</duration>
      <cost type='mana'>7</cost>
      <message type='start'>Casually you push your finger into your eye socket and cup it around the throbbing eyeball\.  With a little leverage you pop the eye from your skull and watch as it sprouts little batlike wings and begins to hover before you\.</message>
      <message type='end'>You hear a soft hiss as your wandering eye rushes towards you\.  You reach out and catch the squishy globe and quickly press it back into your eye socket\.  After a few blinks it seems to seat itself properly\.  You wipe off some gooey red residue with your sleeve, and feel yourself once again presentable\.</message>
   </spell>
   <spell availability='all' name='Limb Disruption' number='708' type='attack'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='all' name='Quake' number='709' type='attack'>
      <cost type='mana'>9</cost>
   </spell>
   <spell availability='all' name='Energy Maelstrom' number='710' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='all' name='Pain' number='711' type='attack'>
      <cost type='mana'>11</cost>
   </spell>
   <spell availability='self-cast' name='Cloak of Shadows' number='712' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.sorcerer</duration>
      <cost type='mana'>12 + [(([Spells.sorcerer,Stats.level].min - 12) / 3),0].max</cost>
      <bonus type='bolt-ds'>[25+([Spells.sorcerer,Stats.level].min-12),25].max</bonus>
      <bonus type='physical-ds'>[25+([Spells.sorcerer,Stats.level].min-12),25].max</bonus>
      <bonus type='elemental-td'>([20+(([Spells.sorcerer,Stats.level].min-12)/10),20].max*0.75).to_i</bonus>
      <bonus type='spirit-td'>([20+(([Spells.sorcerer,Stats.level].min-12)/10),20].max*0.75).to_i</bonus>
      <bonus type='sorcerer-td'>[20+(([Spells.sorcerer,Stats.level].min-12)/10),20].max</bonus>
      <message type='start'>A shadowy patch of ether rises up through the (?:floor|ground) to encompass you, swiftly sinking into your skin\.</message>
      <message type='end'>A dark shadow seems to detach itself from your body, swiftly dissipating into the air\.</message>
   </spell>
   <spell availability='all' name='Balefire' number='713' stance='yes' type='attack'>
      <cost type='mana'>13</cost>
   </spell>
   <spell availability='all' name='Scroll Infusion' number='714' type='utility'>
      <cost type='mana'>14</cost>
   </spell>
   <spell availability='all' name='Curse' number='715' type='attack'>
      <cost type='mana'>15</cost>
   </spell>
   <spell availability='self-cast' name='Pestilence' number='716' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.sorcerer</duration>
      <cost type='mana'>16</cost>
      <message type='start'>A cankerous ripple of vesicles temporarily disfigures your face and travels down your body, leaving a sickly green miasma as it disappears\.</message>
      <message type='end'>You exhale the last of a virulent green mist\.</message>
   </spell>
   <spell availability='all' name='Evil Eye' number='717' type='attack' incant='no'>
      <cost type='mana'>17</cost>
   </spell>
   <spell availability='all' name='Torment' number='718' type='attack'>
      <cost type='mana'>18</cost>
   </spell>
   <spell availability='all' name='Dark Catalyst' number='719' type='attack'>
      <cost type='mana'>19</cost>
   </spell>
   <spell availability='all' name='Implosion' number='720' type='attack' incant='no'>
      <cost type='mana'>20</cost>
   </spell>
   <spell availability='self-cast' name='Minor Summoning' number='725' type='utility'>
      <duration span='refreshable'>10 + (Spells.sorcerer/3.0) + (Skills.sldemonology/2.0)</duration>
      <cost type='mana'>25</cost>
      <message type='start'>You trace an arcane sigil over your .+ while incanting\.  Your .+ glows momentarily, and you succeed in opening an interplanar rift from which you manage to pull .+\.</message>
      <message type='start'>You trace the runes on .+ to strengthen the binding between your .+ and this plane\.  You feel a bit of power leeched from your .+ as a spark follows your finger&apos;s path across the .+\.</message>
      <message type='end'>You sense that you will not be able to control .+ much longer so you incant arcanely while concentrating upon the .+\.  You gesture vividly causing a small interplanar rift to open.  The .+ is pulled through the rift\.</message>
   </spell>
   <spell name='Illusion - Demon' number='9725' type='timer'>
      <duration>30</duration>
      <message type='start'>You shift your gaze to your .+ and focus your energy upon creating the illusion of disguise\.  You move quickly towards .+, feeling your energy focus upon your fist and causing it to radiate with a black essence\.  At the last moment, you plunge your fist into the .+ of your .+\.  .+ suddenly erupts in a shroud of black essence and tries to recoil away from you\.  You focus your will upon the essence and .+, and watch as the creature begins to ripple\.  Piece by piece, the creature&apos;s form changes until .+ stands in its place and you withdraw your hand\.</message>
      <message type='start'>You glide your hand over .+, leaving rippling motes of color in the wake of your hand as you attempt to strengthen the flows of essence around .+\.  You sense a pulse as the motes disappear within .+, revitalizing the .+ into an impeccable illusion\.</message>
      <message type='end'>Droplets of inky black ichor begin to drip down from .+ and pool underneath as the veil of an illusion peels back\.  The visage of .+ begins to distort and reveals behind it .+\.  As the last droplet \*plops\* into the pool, it dissolves into mist that .+\.</message>
   </spell>
   <spell availability='all' name='Animate Dead' number='730' type='utility'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='all' name='Ensorcell' number='735' type='utility'>
      <cost type='mana'>35</cost>
   </spell>
   <spell availability='all' name='Planar Shift' number='740' type='utility'>
      <cost type='mana'>40</cost>
   </spell>
   <spell availability='all' name='Minor Shock' number='901' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='all' name='Minor Elemental Edge' number='902' type='offense'>
      <cost type='mana'>2</cost>
   </spell>
   <spell availability='all' name='Minor Water' number='903' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>3</cost>
   </spell>
   <spell availability='all' name='Minor Acid' number='904' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>4</cost>
   </spell>
   <spell availability='self-cast' name='Prismatic Guard' number='905' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.wizard</duration>
      <cost type='mana'>bonus=0;[5,11,18,26,35,45,56,68,81,95,110,126,143,161,180,200,221,243].each { |n| bonus += 1 if Skills.elearth &gt;= n };5 + (((([Spells.wizard,Stats.level].min - 5) / 4.0).floor + bonus)/3.0).floor</cost>
      <bonus type='bolt-ds'>bonus=0;[5,11,18,26,35,45,56,68,81,95,110,126,143,161,180,200,221,243].each { |n| bonus += 1 if Skills.elearth &gt;= n };[20+((Spells.wizard-5)/4),20].max + bonus</bonus>
      <bonus type='physical-ds'>bonus=0;bonus=0;[5,11,18,26,35,45,56,68,81,95,110,126,143,161,180,200,221,243].each { |n| bonus += 1 if Skills.elearth &gt;= n };[5+((Spells.wizard-5)/4),5].max + bonus</bonus>
      <message type='start'>Multicolored rays shoot out of your body and flow into (?:the|a) shimmering sphere around you\.</message>
      <message type='end'>The shimmering multicolored sphere fades from around you\.</message>
   </spell>
   <spell availability='all' name='Minor Fire' number='906' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>6</cost>
   </spell>
   <spell availability='all' name='Major Cold' number='907' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>7</cost>
   </spell>
   <spell availability='all' name='Major Fire' number='908' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='self-cast' name='Tremors' number='909' type='attack/area/utility'>
      <duration span='refreshable' multicastable='no'>20 + Spells.wizard</duration>
      <cost type='mana'>9</cost>
      <message type='start'>Faint ripples in the (?:dirt|floor|ground|ice|muck|sand|snow|soil) form beneath you for a moment\.</message>
      <message type='end'>Faint ripples in the (?:dirt|floor|ground|ice|muck|sand|snow|soil) beneath you become apparent before quickly dissipating\.</message>
   </spell>
   <spell availability='all' name='Major Shock' number='910' channel='yes' stance='yes' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='group' name='Mass Blur' number='911' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.wizard</duration>
      <cost type='mana'>11</cost>
      <bonus type='dodging'>[1,3,6,10,15,21,28,36,45,55,66,78,91,105,120,136,153,171,190].inject(20) { |bonus, n| bonus += 1 if Skills.elair &gt;= n; bonus }</bonus>
      <message type='start'>Your form(?:, as well as your group,)? blurs\.</message>
      <message type='start'>If you were visible, your form would have blurred\.</message>
      <message type='end'>You become solid again\.</message>
   </spell>
   <spell availability='all' name='Call Wind' number='912' type='attack/area' incant='no'>
      <cost type='mana'>12</cost>
   </spell>
   <spell availability='self-cast' name='Melgorehn&apos;s Aura' number='913' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.wizard</duration>
      <cost type='mana'>13 + (([Spells.wizard,Stats.level].min - 13) / 3.0).round</cost>
      <bonus type='bolt-ds'>[[Spells.wizard-3,97].min,10].max</bonus>
      <bonus type='physical-ds'>[[Spells.wizard-3,97].min,10].max</bonus>
      <bonus type='elemental-td'>[20+((Spells.wizard-13)/3),20].max</bonus>
      <bonus type='spirit-td'>([20+((Spells.wizard-13)/3),20].max/2).to_i</bonus>
      <bonus type='sorcerer-td'>([20+((Spells.wizard-13)/3),20].max*0.75).to_i</bonus>
      <message type='start'>A luminescent aura begins to swirl around you\.</message>
      <message type='end'>A luminescent aura fades from around you\.</message>
   </spell>
   <spell availability='all' name='Sandstorm' number='914' type='attack'>
      <cost type='mana'>14</cost>
   </spell>
   <spell availability='all' name='Weapon Fire' number='915' type='attack'>
      <cost type='mana'>15</cost>
   </spell>
   <spell availability='self-cast' name='Invisibility' number='916' type='utility'>
      <duration span='refreshable'>20 + (Spells.wizard / 2)</duration>
      <cost type='mana'>16</cost>
      <message type='start'>You become invisible\.</message>
      <message type='start'>Your invisibility is extended\.</message>
      <message type='start'>You refresh your invisibility\.</message>
      <message type='end'>You (become|are) visible again\.</message>
      <message type='end'>You fade into (?:view|sight|visibility)(\.| and strike!)</message>
      <message type='end'>Your invisibili?ty (falls\.|fails\.|has been dispelled!)</message>
      <message type='end'>Your startled movement makes you visible again!</message>
      <message type='end'>You make so much noise that only the dead would not notice you thrashing about in your unsuccessful search\.|^The driving storm breaks your concentration, leaving you visible again\.|^An? [\w\s]+ discovers you and your invisibility fails!</message>
      <message type='end'>[A-Z][a-z]+ dispels your invisibility!</message>
      <message type='end'>But you are not hidden!</message>
      <message type='end'>Dark, swirling mist billows before you from nothingness, tiny pinpoints of light glimmering from its inky depths\.  Slight crackling can be heard from within and the scent of ozone tickles at your nose\.  Suddenly, a blinding arc of lightning tears through the air and stikes you, causing your invisibility to fade\.</message>
      <message type='end'>Trying to move through [\w\s]+ reveals you\.$|discovers your hiding place!$|your invisibility fails!</message>
   </spell>
   <spell availability='all' name='Earthen Fury' number='917' type='attack'>
      <cost type='mana'>17</cost>
   </spell>
   <spell availability='all' name='Duplicate' number='918' type='utility'>
      <cost type='mana'>18</cost>
   </spell>
   <spell availability='self-cast' name='Wizard&apos;s Shield' number='919' type='defense'>
      <duration span='refreshable'>1</duration>
      <cost type='mana'>19</cost>
      <bonus type='bolt-ds'>50</bonus>
      <bonus type='physical-ds'>50</bonus>
      <message type='start'>A translucent sphere forms around you\.</message>
      <message type='end'>The translucent sphere fades from around you\.</message>
   </spell>
   <spell availability='self-cast' name='Call Familiar' number='920' type='utility'>
      <duration persist-on-death='yes' span='stackable' multicastable='no'>20 + Spells.wizard</duration>
      <cost type='mana'>20</cost>
      <message type='start'>You (concentrate on the [a-z]+ talisman as you )?cast your conciousness out into the ether in search of a (specific type of )?familiar\.</message>
      <message type='start'>You feel the magical link between you and your (?:[\-\w+])[\-\s\w]* (?:grow stronger|strengthen)\.</message>
      <message type='start'>As you gaze into the depths of the tiny pool, you notice a faint tickle\.  It is almost as if the ring is drawing energy from your very being\.\.\.</message>
      <message type='end'>You sense the link between you and your (?:[\-\w+])[\-\s\w]* weaken and vanish\.</message>
   </spell>
   <spell availability='all' name='Enchant Item' number='925' type='utility'>
      <cost type='mana'>25</cost>
   </spell>
   <spell availability='all' name='Familiar Gate' number='930' type='utility'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='all' name='Core Tap' number='950' type='attack'>
      <cost type='mana'>50</cost>
   </spell>
   <spell availability='self-cast' name='Core Tap Recovery (1 Charge)' number='996'>
      <duration>1</duration>
   </spell>
   <spell availability='self-cast' name='Core Tap Recovery (2 Charges)' number='997'>
      <duration>s = Spell['Core Tap Recovery (1 Charge)'];s.timeleft &gt; 0.0 ? s.timeleft : 1</duration>
   </spell>
   <spell availability='self-cast' name='Core Tap Recovery (3 Charges)' number='998'>
      <duration>s = Spell['Core Tap Recovery (2 Charges)'];s.timeleft &gt; 0.0 ? s.timeleft : 1</duration>
   </spell>
   <spell availability='self-cast' name='Core Tap Recovery' number='999'>
      <duration>if which = ['3 Charges','2 Charges','1 Charge'].find { |w| Spell["Core Tap Recovery (#{w})"].timeleft > 0 }; Spell["Core Tap Recovery (#{which})"].timeleft; else; 1; end</duration>
      <message type='start'>Tapping into the elemental core of Elanthia, you seize part of its energy\.  Swirling ribbons of fiery red, deep blue, earthen brown, and airy white energy rise up from the (?:floor|ground) and surround you\.  They linger for a brief moment, then explode into a shower of sparks!</message>
      <message type='start'>You are too exhausted to cast Core Tap right now\.</message>
      <message type='end'>Your exhaustion from tapping into the elemental core fades\.</message>
   </spell> 
   <spell availability='all' name='Holding Song' number='1001' type='attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='all' name='Vibration Chant' number='1002' type='attack'>
      <cost type='mana'>2</cost>
   </spell>
   <spell availability='self-cast' name='Fortitude Song' number='1003' type='defense'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>3</cost>
      <cost type='renew'>1</cost>
      <bonus type='bolt-ds'>10</bonus>
      <bonus type='physical-ds'>10</bonus>
      <message type='start'>You begin to sing of heroic deeds and bolster your confidence\.</message>
      <message type='end'>You no longer feel a sense of confidence\.</message>
   </spell>
   <spell availability='all' name='Purification Song' number='1004' type='utility'>
      <cost type='mana'>4</cost>
   </spell>
   <spell availability='all' name='Lullabye' number='1005' type='attack'>
      <cost type='mana'>5</cost>
   </spell>
   <spell availability='self-cast' name='Song of Luck' number='1006' type='utility'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>6+([Spells.bard-6,0].max/4)</cost>
      <cost type='renew'>3+([Spells.bard-6,0].max/8)</cost>
      <message type='start'>As (?:you|[A-Z][a-z]+) sings?, the air sparkles briefly (?:with tiny flashing motes of light before returning to normal|around you)\.  You feel strangely lucky!</message>
      <message type='end'>The air stops shimmering around you(?: and your group)?\.</message>
   </spell>
   <spell availability='self-cast' name='Kai&apos;s Triumph Song' number='1007' type='offense/bonus'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>7+[[Spells.bard-7,0].max,13].min</cost>
      <cost type='renew'>2+[[Spells.bard-7,0].max,13].min</cost>
      <bonus type='bolt-as'>([[3+Spells.bard,10].max,20].min)+(bonus=0;[3,7,12,18,25,33,42,52,63,75,88,102,117,133,150,168,187].each { |n| bonus+=1 if Skills.mltelepathy &gt;= n }; bonus)</bonus>
      <bonus type='physical-as'>([[3+Spells.bard,10].max,20].min)+(bonus=0;[3,7,12,18,25,33,42,52,63,75,88,102,117,133,150,168,187].each { |n| bonus+=1 if Skills.mltelepathy &gt;= n }; bonus)</bonus>
      <message type='start'>Your (?:spirit is|spirits are) lifted by the verses praising Kai\.$|^[A-Z][a-z]+ sings of Kai&apos;s many triumphs, lifting your spirits\.</message>
      <message type='end'>Your (?:spirit is|spirits are|spirits, and those of your group, are) no longer lifted by stories of Kai&apos;s Triumphs\.</message>
   </spell>
   <spell availability='all' name='Stunning Shout' number='1008' type='attack'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='self-cast' name='Sonic Shield Song' number='1009' type='defense'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>9</cost>
      <cost type='renew'>4</cost>
      <bonus type='bolt-ds'>[10+(Spells.bard/2.0).round,35].min</bonus>
      <bonus type='physical-ds'>[10+(Spells.bard/2.0).round,35].min</bonus>
      <message type='start'>You begin singing and focus your voice into a vortex of air centered on your left arm\.</message>
      <message type='end'>Your(?: sonic)? (?:buckler|kidney|small|targe|heater|knight&apos;s|lantern|medium|parma|target|aegis|kite|large|pageant|round|scutum|greatshield|mantlet|pavis|tower|wall|shield|translucent)?(?:\sshield)? dissipates\.</message>
   </spell>
   <spell availability='self-cast' name='Song of Valor' number='1010' type='defense'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>10+((Spells.bard-10)/4)</cost>
      <cost type='renew'>3+((Spells.bard-10)/10)</cost>
      <bonus type='bolt-ds'>10+(([Spells.bard,Stats.level].min-10)/2)+([Spells.bard-Stats.level,0].max/5)</bonus>
      <bonus type='physical-ds'>10+(([Spells.bard,Stats.level].min-10)/2)+([Spells.bard-Stats.level,0].max/5)</bonus>
      <bonus type='elemental-td'>15</bonus>
      <message type='start'>As you begin to sing of valiant legends, you feel more protected\.</message>
      <message type='end'>You no longer feel a sense of protection\.</message>
   </spell>
   <spell availability='self-cast' name='Song of Peace' number='1011' type='utility'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>11</cost>
      <cost type='renew'>4</cost>
      <message type='start'>The surroundings respond to the soothing melody of your song, becoming calm and still\.</message>
      <message type='end'>The sense of peace and security passes away from the area\.|You stop singing Song of Peace\.</message>
   </spell>
   <spell availability='self-cast' name='Sonic Weapon Song' number='1012' type='attack'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>12</cost>
      <cost type='renew'>4</cost>
      <bonus type='physical-as'>[10+(Spells.bard/2.0).round,35].min</bonus>
      <message type='start'>You begin singing and focus your voice into a (?:vortex of air shaped like a )?sonic (?:[\w\-]+\s?){1,3}(?:,| shaped vortex of air) centered on your (?:right|left) hand\.</message>
      <message type='end'>Your (?:sonic|twohanded|main) (?!barrier|buckler|kidney|small|targe|heater|knight&apos;s|lantern|medium|parma|target|aegis|kite|large|pageant|round|scutum|greatshield|mantlet|pavis|tower|wall|shield|barrier)[\w\s\-]+ dissipates\.|Your sonic weapon is not in your hands\.(?:  You are unable to renew the song\.)?</message>
   </spell>
   <spell availability='all' name='Song of Unravelling' number='1013' type='attack/utility'>
      <cost type='mana'>13</cost>
   </spell>
   <spell availability='self-cast' name='Sonic Armor' number='1014' type='defense'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>14</cost>
      <cost type='renew'>5</cost>
      <bonus type='bolt-ds'>[15+(Spells.bard/2.0).round,35].min</bonus>
      <bonus type='physical-ds'>[15+(Spells.bard/2.0).round,35].min</bonus>
      <message type='start'>You begin singing and focus your voice into a vortex of air centered around your body\.</message>
      <message type='end'>Your sonic barrier dissipates\.</message>
   </spell>
   <spell availability='all' name='Song of Depression' number='1015' type='attack'>
      <cost type='mana'>15</cost>
      <cost type='renew'>6</cost>
   </spell>
   <spell availability='all' name='Song of Rage' number='1016' type='attack'>
      <cost type='mana'>16</cost>
   </spell>
   <spell availability='self-cast' name='Song of Noise' number='1017' type='utility'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>17</cost>
      <cost type='renew'>7</cost>
      <message type='start'>The surroundings respond to your piercing voice, disrupting the normal flow of mana\.</message>
      <message type='end'>The cacophony of sound finally passes away from the area\.|You stop singing Song of Noise\.</message>
   </spell>
   <spell availability='self-cast' name='Song of Power' number='1018' type='bonus'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>18</cost>
      <cost type='renew'>15</cost>
      <message type='start'>As you sing, you feel the mana around you begin to swirl and move with a subtle grace\.</message>
      <message type='end'>The mana around you slowly returns to its natural state\.</message>
   </spell>
   <spell availability='self-cast' name='Song of Mirrors' number='1019' type='defense'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>19+((Spells.bard-19)/5)</cost>
      <cost type='renew'>8+((Spells.bard-19)/10)</cost>
      <bonus type='dodging'>[20+((Spells.bard-19)/2),20].max</bonus>
      <message type='start'>As you begin to sing a sibilant melody, shimmering mirror images of you appear in the area\.</message>
      <message type='start'>The mirror images surrounding you undulate and grow stronger\.</message>
      <message type='end'>The mirror images surrounding you undulate and fade away\.</message>
   </spell>
   <spell availability='all' name='Traveller&apos;s Song' number='1020' type='utility'>
      <cost type='mana'>20</cost>
   </spell>
   <spell availability='all' name='Singing Sword Song' number='1025' type='attack/utility'>
      <duration>Spellsong.timeleft</duration>
      <cost type='mana'>25</cost>
      <cost type='renew'>15</cost>
      <message type='start'>An animated .+ appears and hovers near you\.</message>
      <message type='end'>Your animated .+ dissipates in a shower of sparkling motes of light\.</message>
      <message type='end'>You feel the magic of your animated .+ unravel and end\.</message>
   </spell>
   <spell availability='all' name='Song of Sonic Disruption' number='1030' type='attack'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='self-cast' name='Song of Tonis' number='1035' type='defense/bonus'>
      <duration>dur = 60.0; 1.upto(Skills.mltelepathy) { |val| if 20 &gt;= val then dur += 1.0 else dur += 0.5 end }; dur / 60.0</duration>
      <cost type='mana'>35</cost>
      <bonus type='dodging'>bonus = 20; [1,2,3,5,8,10,14,17,21,26,31,36,42,49,55,63,70,78,87,96].each { |n| bonus += 1 if Skills.elair &gt;= n }; bonus</bonus>
      <message type='start'>As [A-z]+ sings?, a(?:n invigorating)? squall of wind (?:briefly )?swirls (?:around|about) you(?: and you hear a barely audibl[ey] burst of laughter)?\.(?:  You feel yourself moving (?:a bit )?more smoothly and quickly than before!)?</message>
      <message type='end'>You hear a laugh and a clink of coins, and (?:you and your group )?become a bit less nimble\.</message>
   </spell>
   <spell availability='all' name='Troubadour&apos;s Rally' number='1040' type='defense/utility'>
      <cost type='mana'>40</cost>
      <cast-proc>fput &quot;shout 1040&quot;</cast-proc>
   </spell>
   <spell availability='all' name='Heal' number='1101' type='utility/attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='all' name='Limb Repair' number='1102' type='utility'>
      <cost type='mana'>if (Wounds.limbs &gt; 1) and (Spells.empath &gt;= 7) then 7 else 2 end</cost>
   </spell>
   <spell availability='all' name='System Repair' number='1103' type='utility'>
      <cost type='mana'>if (Wounds.nerves &gt; 1) and (Spells.empath &gt;= 8) then 8 else 3 end</cost>
   </spell>
   <spell availability='all' name='Head Repair' number='1104' type='utility'>
      <cost type='mana'>if ([Wounds.head, Wounds.neck].max &gt; 1) and (Spells.empath &gt;= 9) then 9 else 4 end</cost>
   </spell>
   <spell availability='all' name='Organ Repair' number='1105' type='utility'>
      <cost type='mana'>if (Wounds.torso &gt; 1) and (Spells.empath &gt;= 10) then 10 else 5 end</cost>
   </spell>
   <spell availability='all' channel='yes' name='Bone Shatter' number='1106' type='attack'>
      <cost type='mana'>6</cost>
   </spell>
   <spell availability='all' name='Adrenal Surge' number='1107' type='utility'>
      <cost type='mana'>7</cost>
   </spell>
   <spell availability='all' name='Empathy' number='1108' type='attack'>
      <cost type='mana'>8</cost>
   </spell>
   <spell availability='self-cast' name='Empathic Focus' number='1109' type='offense/defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.empath</duration>
      <cost type='mana'>9 + [(([Spells.empath,Stats.level].min - 9) / 6.0).round,0].max</cost>
      <bonus type='physical-as'>15</bonus>
      <bonus type='bolt-ds'>[25+(([Stats.level,Spells.empath].min-9)/2),25].max</bonus>
      <bonus type='physical-ds'>[25+(([Stats.level,Spells.empath].min-9)/2),25].max</bonus>
      <bonus type='elemental-td'>7</bonus>
      <bonus type='spirit-td'>15</bonus>
      <bonus type='sorcerer-td'>10</bonus>
      <message type='start'>You center yourself and (?:focus|renew) your concentration\.</message>
      <message type='end'>Your mind&apos;s keen focus fades away\.</message>
   </spell>
   <spell availability='all' name='Empathic Assault' number='1110' stance='yes' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='all' name='Limb Scar Repair' number='1111' type='utility'>
      <cost type='mana'>if (Scars.limbs &gt; 1) and (Spells.empath &gt;= 15) then 15 else 11 end</cost>
   </spell>
   <spell availability='all' name='System Scar Repair' number='1112' type='utility'>
      <cost type='mana'>if (Scars.nerves &gt; 1) and (Spells.empath &gt;= 16) then 16 else 12 end</cost>
   </spell>
   <spell availability='all' name='Head Scar Repair' number='1113' type='utility'>
      <cost type='mana'>if ([Scars.head,Scars.neck].max &gt; 1) and (Spells.empath &gt;= 17) then 17 else 13 end</cost>
   </spell>
   <spell availability='all' name='Organ Scar Repair' number='1114' type='utility'>
      <cost type='mana'>if (Scars.torso &gt; 1) and (Spells.empath &gt;= 18) then 18 else 14 end</cost>
   </spell>
   <spell availability='all' name='Wither' number='1115' type='attack'>
      <cost type='mana'>15</cost>
   </spell>
   <spell availability='all' name='Rapid Healing' number='1116' type='utility'>
      <duration>1</duration>
      <cost type='mana'>16</cost>
      <message type='start'>You narrow your focus on your healing energies, stimulating their flow\.</message>
   </spell>
   <spell availability='all' name='Empathic Link' number='1117' type='attack'>
      <cost type='mana'>8 + (Stats.level/10)</cost>
   </spell>
   <spell availability='all' name='Herb Production' number='1118' type='utility'>
      <cost type='mana'>18</cost>
   </spell>
   <spell availability='self-cast' name='Strength Of Will' number='1119' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.empath</duration>
      <cost type='mana'>19 + (([Spells.empath,Stats.level].min - 19) / 6.0).round</cost>
      <bonus type='bolt-ds'>[[12+((Spells.empath-19)/3),12].max,25].min</bonus>
      <bonus type='physical-ds'>[[12+((Spells.empath-19)/3),12].max,25].min</bonus>
      <bonus type='elemental-td'>([[12+((Spells.empath-19)/3),12].max,25].min/2).to_i</bonus>
      <bonus type='spirit-td'>[[12+((Spells.empath-19)/3),12].max,25].min</bonus>
      <bonus type='sorcerer-td'>([[12+((Spells.empath-19)/3),12].max,25].min*0.75).to_i</bonus>
      <message type='start'>You feel an aura of resolve surround you\.  The exhilarating sensation sends your heart racing and a warm flush tingling through your body\.</message>
      <message type='end'>Your aura of resolve dissipates\.</message>
   </spell>
   <spell availability='all' name='Sympathy' number='1120' type='attack'>
      <cost type='mana'>20</cost>
   </spell>
   <spell availability='self-cast' name='Troll&apos;s Blood' number='1125' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.empath</duration>
      <cost type='mana'>25</cost>
      <message type='start'>Dark red droplets coalesce upon your skin before sinking into your flesh\.  (?:Your heart stutters for an instant before settling into a steady, powerful rhythm|Your heart, already beating strongly with Troll&apos;s Blood, accelerates with new vigor as your body accepts the new infusion)\.</message>
      <message type='end'>Your heart staggers briefly before slowing to a more regular speed\.  Dark red droplets seep out of your skin and evaporate as the influence of Troll&apos;s Blood leaves you\.</message>
   </spell>
   <spell availability='self-cast' name='Intensity' number='1130' type='offense/defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.empath</duration>
      <cost type='mana'>30 + ([(([Spells.empath,Stats.level].min-30)/2),0].max/3)</cost>
      <bonus type='bolt-as'>[20+(([Spells.empath,Stats.level].min-30)/2),20].max</bonus>
      <bonus type='physical-as'>[20+(([Spells.empath,Stats.level].min-30)/2),20].max</bonus>
      <bonus type='bolt-ds'>[20+(([Spells.empath,Stats.level].min-30)/2),20].max</bonus>
      <bonus type='physical-ds'>[20+(([Spells.empath,Stats.level].min-30)/2),20].max</bonus>
      <message type='start'>You feel an intense resolve fill your mind, and concentrate on improving your efforts to guard yourself\.</message>
      <message type='end'>Your intensity subsides\.</message>
   </spell>
   <spell availability='all' name='Regeneration' number='1150' type='utility'>
      <cost type='mana'>50</cost>
   </spell>
    <spell availability='all' name='Rapid Healing Recovery' number='1199'>
      <duration>30</duration>
      <message type='start'>You release your pinpoint focus on your healing energies and allow their stimulated flow to settle to normal rates\.</message>
	</spell>
   <spell availability='all' name='Soothing Word' number='1201' type='attack'>
      <cost type='mana'>1</cost>
   </spell>
   <spell availability='self-cast' name='Iron Skin' number='1202' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minormental</duration>
      <cost type='mana'>2</cost>
      <bonus type='asg'>6 + (bonus = 0; [5,15,30,50,75,105,140,180,225].each { |n| bonus += 1 if Skills.mltransformation &gt;= n }; bonus) + (Char.prof == 'Monk' ? (bonus = 0; [5,15,30,50,75].each { |n| bonus += 1 if Char.level &gt;= n }; bonus) : 0)</bonus>
      <message type='start'>You feel your skin grow tight all across your body and your complexion takes on a .*? quality\.</message>
      <message type='end'>You feel the tension in your skin ease and notice that your complexion returns to normal\.</message>
   </spell>
   <spell availability='all' name='Powersink' number='1203' type='attack'>
      <cost type='mana'>3</cost>
   </spell>
   <spell availability='all' name='Foresight' number='1204' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minormental</duration>
      <cost type='mana'>4</cost>
      <bonus type='physical-ds'>10</bonus>
      <message type='start'>Opening your mind&apos;s eye to the progression of time, a myriad of possible future events fills your consciousness\.</message>
      <message type='end'>Like sand through an hourglass, your visions of the future slip away and fade from your mind\.</message>
   </spell>
   <spell availability='all' name='Glamour' number='1205' type='utility'>
      <cost type='mana'>5</cost>
   </spell>
   <spell availability='all' name='Telekinesis' number='1206' type='attack'>
      <cost type='mana'>6</cost>
   </spell>
   <spell availability='all' name='Force Projection' number='1207' type='attack'>
      <cost type='mana'>7</cost>
   </spell>
   <spell availability='all' name='Mindward' number='1208' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minormental</duration>
      <cost type='mana'>8 + ([([([Spells.minormental,Stats.level].min - 8), 0].max/2), 20].min/2)</cost>
      <bonus type='elemental-td'>[20 + ([([Spells.minormental,Stats.level].min - 8), 0].max/2), 40].min/2</bonus>
      <bonus type='mental-td'>[20 + ([([Spells.minormental,Stats.level].min - 8), 0].max/2), 40].min</bonus>
      <bonus type='spirit-td'>[20 + ([([Spells.minormental,Stats.level].min - 8), 0].max/2), 40].min/2</bonus>
      <bonus type='sorcerer-td'>[20 + ([([Spells.minormental,Stats.level].min - 8), 0].max/2), 40].min/2</bonus>
      <message type='start'>You feel your forehead pulse as your mind hardens to deter invading thoughts\.</message>
      <message type='end'>You feel your forehead pulse as your mind relaxes\.</message>
   </spell>
   <spell availability='self-cast' name='Dragonclaw' number='1209' type='offense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minormental</duration>
      <cost type='mana'>9</cost>
      <bonus type='unarmed-af'>10+(bonus=0;[1,3,6,10,15,21,28,36,45,55,66,78,91,105,120,136,153,171,190].each { |n| bonus += 1 if Skills.mltransformation >= n }; bonus)</bonus>
      <message type='start'>Your hands grow hard and scaly\.</message>
      <message type='end'>The scales covering your hands turn brittle and flake away\.</message>
   </spell>
   <spell availability='all' name='Thought Lash' number='1210' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='all' name='Confusion' number='1211' type='attack'>
      <cost type='mana'>11</cost>
   </spell>
   <spell availability='self-cast' name='Shroud of Deception' number='1212' type='utility'>
      <duration span='stackable'>20 + Spells.minormental</duration>
      <cost type='mana'>12</cost>
      <message type='start'>Your appearance shimmers briefly\.</message>
      <message type='end'>Your appearance briefly shimmers\.</message>
   </spell>
   <spell availability='self-cast' name='Mind over Body' number='1213' type='utility'>
      <duration max="599">599</duration>
      <cost type='mana'>13</cost>
      <bonus type='stamina-reduction'>20+(bonus=0;[6,15,30,80,150,230].each { |n| bonus += 5 if Skills.mltelepathy &gt;= n };bonus)</bonus>
      <message type='start'>Your muscles ripple momentarily and you suddenly become aware of a multitude of your body&apos;s processes\.  You feel an unnatural control over your breathing, heart rate and muscle tension\.(?:\s+Your group appears similarly affected\.)?</message>
      <message type='end'>You feel your muscles begin to strain for an instant\.  The sense of body control has left you\.</message>
   </spell>
   <spell availability='self-cast' name='Brace' number='1214' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minormental</duration>
      <cost type='mana'>14</cost>
      <message type='start'>Thick plates of bone grow from your forearms\.</message>
      <message type='start'>The bones surrounding your forearms shift and fortify\.</message>
      <message type='end'>The thick plates of bone around your forearms begin to crack, then shatter into a fine white dust\.</message>
   </spell>
   <spell availability='all' name='Blink' number='1215' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.minormental</duration>
      <duration cast-type='target' span='refreshable'>2</duration>
      <cost type='mana'>15</cost>
      <message type='start'>A momentary eruption of starlit darkness engulfs you\.  As the shadow thins, double images of the world sway dizzyingly around you before regaining solidity\.$|^A momentary eruption of a flurry of squeaking bats engulfs you, flapping with a frenzy of shrill squeaks and chitters as they cyclone wildly about you. \s?As the bats wing away into the sky, double images of the world sway dizzyingly around you before regaining solidity\.</message>
      <message type='end'>Darkness punctuated by a constellation of starry pinpoints wells up to the surface of your skin and splinters away with a sound like shattering crystal\.$|^A cloud of bats suddenly appear and wing straight for you, disappearing into a fine mist just before impact\.</message>
   </spell>
   <spell availability='all' name='Focus Barrier' number='1216' type='defense'>
      <duration max="599">599</duration>
      <cost type='mana'>16</cost>
      <bonus type='physical-ds'>30</bonus>
      <message type='start'>A barrier of force forms around you(?: and your group)?\.</message>
      <message type='end'>The barrier of force around you dissipates\.</message>
   </spell>
   <spell availability='all' name='Vision' number='1217' type='utility'>
      <cost type='mana'>17</cost>
   </spell>
   <spell availability='all' name='Mental Dispel' number='1218' type='attack/utility'>
      <cost type='mana'>18</cost>
   </spell>
   <spell availability='all' name='Vertigo' number='1219' type='attack'>
      <cost type='mana'>19</cost>
   </spell>
   <spell availability='self-cast' name='Premonition' number='1220' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.minormental</duration>
      <cost type='mana'>20 + ([([Spells.minormental,Stats.level].min - 20), 0].max/4)</cost>
      <bonus type='bolt-ds'>20 + ([([Spells.minormental,Stats.level].min - 20), 0].max/2)</bonus>
      <bonus type='physical-ds'>20 + ([([Spells.minormental,Stats.level].min - 20), 0].max/2)</bonus>
      <message type='start'>A flood of visions fills your mind and you strain to pick out your place amongst the countless blurred images and muted sound\.</message>
      <message type='end'>The visions slowly trickle from your mind, and you are left with the world before you once again\.</message>
   </spell>
   <spell availability='all' name='Mindwipe' number='1225'/>
   <spell availability='all' name='Provoke' number='1235' type='utility'>
      <duration>3</duration>
      <cost type='mana'>35</cost>
      <message type='start'>You focus inward, drawing on all of your unrest and unsettled indignation\.  Before you, a ball of blanched fire winks into existence\.  You feed it your anger, your pettiness and your hate, watching it swell and grow\.  Tendrils of white flame extend from the miniature sun, snaking out to lash the air\.  Pouring the last, deepest remnants of your vitriol, you unleash the full power of your rage\.  It spreads like an inferno, overtaking all in its path, battering them with the entirety of your darkest thoughts\.</message>
      <message type='end'>The sense of anger in the air, previously hanging like a vitriolic cloud, laced with blanched fire, fades and then disappears\.</message>
   </spell>
   <spell availability='all' name='Mantle of Faith' number='1601' type='defense'>
      <duration cast-type='self' span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <duration cast-type='target' span='refreshable'>20 + Spells.paladin</duration>
      <cost type='mana'>cost = 1; [2,5,9,14,20,27,35,44,54,65,77,90,104,119,135,152,170,189].each { |n| cost += 1 if Skills.slblessings &gt;= n }; cost</cost>
      <bonus type='bolt-ds'>bonus = 5; [2,5,9,14,20,27,35,44,54,65,77,90,104,119,135,152,170,189].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus</bonus>
      <bonus type='physical-ds'>bonus = 5; [2,5,9,14,20,27,35,44,54,65,77,90,104,119,135,152,170,189].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus</bonus>
      <bonus type='elemental-td'>((bonus = 5; [2,5,9,14,20,27,35,44,54,65,77,90,104,119,135,152,170,189].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus)/2).to_i</bonus>
      <bonus type='spirit-td'>bonus = 5; [2,5,9,14,20,27,35,44,54,65,77,90,104,119,135,152,170,189].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus</bonus>
      <bonus type='sorcerer-td'>((bonus = 5; [2,5,9,14,20,27,35,44,54,65,77,90,104,119,135,152,170,189].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus)*0.75).to_i</bonus>
      <message type='start'>A whirl of spiritual energy streaks down from above, creating a dully illuminated mantle around your form\.|^The dully illuminated mantle surrounding your form seems to gain some cohesion\.</message>
      <message type='end'>The dully illuminated mantle protecting you begins to falter, then completely fades away\.</message>
   </spell>
   <spell availability='all' name='Pious Trial' number='1602' type='attack'>
      <cost type='mana'>2</cost>
   </spell>
   <spell availability='all' name='Templar&apos;s Verdict' number='1603' type='attack'>
      <cost type='mana'>3</cost>
   </spell>
   <spell availability='all' name='Consecrate' number='1604' type='utility'>
      <cost type='mana'>4</cost>
   </spell>
   <spell availability='group' name='Arm of the Arkati' number='1605' type='offense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <cost type='mana'>cost = 5; [5,11,18,26,35,45,56,68,81,95,110,126,143,161,180,200].each { |n| cost += 1 if Skills.slsummoning &gt;= n }; if group? then cost + 1 else cost end</cost>
      <bonus type='damagefactor'>10 + (bonus = 0; [5,11,18,26,35,45,56,68,81,95,110,126,143,161,180,200].each { |n| bonus += 1 if Skills.slsummoning &gt;= n }; bonus)</bonus>
      <message type='start'>You feel a subdued warmth through your arms and torso, accompanied by a preponderant sense of engagement\.</message>
      <message type='end'>The warmth surrounding you fades with the spiritual force that was surrounding your arms\.|The subdued warmth embracing you fades along with the spiritual force surrounding your arms\.</message>
   </spell>
   <spell availability='self-cast' name='Dauntless' number='1606' type='offense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <cost type='mana'>6</cost>
      <bonus type='bolt-as'>10</bonus>
      <bonus type='physical-as'>10</bonus>
      <message type='start'>You are filled with a deeply confident and fearless composure\.|Your confidence and fearlessness is bolstered\.</message>
      <message type='end'>Your boosted confidence and fearlessness fade\.</message>
   </spell>
   <spell availability='self-cast' name='Rejuvenation' number='1607' type='utility'>
      <duration>5.13</duration>
      <cost type='mana'>7</cost>
      <message type='start'>Granules of cobalt light coalesce around you and as they begin to seep into your exposed skin, you feel invigorated\.</message>
      <message type='end'>Cobalt light separates itself from your skin and scatters into oblivion\.</message>
   </spell>
   <spell availability='self-cast' name='Defense of the Faithful' number='1608' type='defense/utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <cost type='mana'>8</cost>
      <bonus type='fof-offset'>0</bonus>
      <message type='start'>Motes of lambent white-gold light appear and begin to swirl around you, coalescing into a radiant aura.|Wisps of lucent silvered ebon smoke appear and begin to twist around you, coalescing into an incandescent veil.|Fingers of fog-hued mist appear and begin to twirl around you, coalescing into a scintillant miasma.</message>
      <message type='end'>The (?:aura of lambent white-gold light motes|haze of lucent silvered ebon smoke|miasma of fog-hued mist) surrounding you dissipates slowly, (?:winking out of existence|thinning until nonexistent|waning until completely diminished).</message>
   </spell>
   <spell availability='group' name='Divine Shield' number='1609' type='defense'>
      <duration max="599">599</duration>
      <cost type='mana'>9</cost>
      <bonus type='physical-ds'>15+(bonus = 0; [6,13,21,30,40].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus)</bonus>
      <bonus type='block'>10 + (bonus = 0; [3,7,12,18,25,33,42,52,63,75,88,102,117,133,150,168,187].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus)</bonus>
      <message type='start'>The warmth works its way toward you, and your shield arm feels much more nimble\.</message>
      <message type='end'>Your skin grows slightly numb for a moment as the warm glow fades from around you\.</message>
   </spell>
   <spell availability='self-cast' name='Higher Vision' number='1610' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <cost type='mana'>cost = 10; cost += (([Spells.paladin,Stats.level].min - 10) / 2).round; if cost &gt; 55 then cost = 55 end; cost</cost>
      <bonus type='bolt-ds'>[[10+((Spells.paladin-10)/2),10].max,20].min+(bonus = 0; [5,11,18,26,35,45,56,68,81,95,110,126,143,161,180,200].each { |n| bonus += 1 if Skills.slreligion &gt;= n }; bonus)</bonus>
      <bonus type='physical-ds'>[[10+((Spells.paladin-10)/2),10].max,20].min+(bonus = 0; [5,11,18,26,35,45,56,68,81,95,110,126,143,161,180,200].each { |n| bonus += 1 if Skills.slreligion &gt;= n }; bonus)</bonus>
      <message type='start'>Visions of future battles fill your eyes, providing you with knowledge of conflicts yet unfought\.</message>
      <message type='end'>You lose a bit of focus as the knowledge of future battles drifts from your mind\.</message>
   </spell>
   <spell availability='self-cast' name='Patron&apos;s Blessing' number='1611' type='defense'>
      <duration span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <cost type='mana'>11 + ((([Spells.paladin,Stats.level].min - 11) * 0.75).round / 3).round</cost>
      <bonus type='combatmaneuvers'>(10 + (0.75 * (Spells.paladin - 10)).round) + (bonus = 0; [3,7,12,18,25,33,42,52,63,75,88,102,117,133,150,168,187].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus)</bonus>
      <message type='start'>An unbridled power surges through you, infusing your body with might and improving your reactions\.</message>
      <message type='end'>You feel your abilities diminish as the energy provided by your patron fades from around you\.</message>
   </spell>
   <spell availability='self-cast' name='Faith&apos;s Clarity' number='1612' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <cost type='mana'>12</cost>
      <message type='start'>The divine power grants you lucid understanding of the spiritual and you become much more clearly focused\.</message>
      <message type='end'>Your sense of clarity fades\.</message>
   </spell>
   <spell availability='all' name='Aid the Fallen' number='1613' type='utility'>
      <cost type='mana'>13</cost>
   </spell>
   <spell availability='all' name='Aura of the Arkati' number='1614' type='attack'>
      <cost type='mana'>14</cost>
   </spell>
   <spell availability='all' name='Repentance' number='1615' type='attack'>
      <cost type='mana'>15</cost>
   </spell>
   <spell availability='self-cast' name='Vigor' number='1616' type='utility'>
      <duration span='stackable' multicastable='yes'>20 + Spells.paladin</duration>
      <cost type='mana'>16</cost>
      <bonus type='constitution'>4+((Spells.paladin-16)/4 ).floor</bonus>
      <bonus type='health'>(Spell[1616].constitution*2)+(bonus = 0; [1,3,6,10,15,21,28,36,45,55,66,78,91,105,120,136,153,171,190].each { |n| bonus += 1 if Skills.slblessings &gt;= n }; bonus)</bonus>
      <message type='start'>The blood in your veins thickens and pulses with renewed life!</message>
      <message type='end'>You feel slightly weakened as the blood in your veins thins\.</message>
   </spell>
   <spell availability='self-cast' name='Zealot' number='1617' type='offense'>
      <duration max="599">599</duration>
      <cost type='mana'>17</cost>
      <bonus type='physical-as'>30+(bonus = 0; [1,3,6,10,15,21,28,36,45,55,66,78,91,105,120,136,153,171,190].each { |n| bonus += 1 if Skills.slreligion &gt;= n }; bonus)</bonus>
      <message type='start'>A surge of radiant energy coalesces around you and (?:then fades into obscurity|those nearby)\.</message>
      <message type='end'>You feel less resolved as the divine urging subsides, fading into obscurity\.</message>
   </spell>
   <spell availability='group' name='Fervor' number='1618' type='offense'>
      <duration max="599">599</duration>
      <cost type='mana'>18</cost>
      <message type='start'>You utter a pious chant and a divine force suddenly radiates around you\.  The intensity of your patron&apos;s aid billows out from you in a wave of righteous indignation\!</message>
      <message type='end'>The divine force surrounding you slowly fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Faith Shield' number='1619' type='defense'>
      <duration>dur = 0.5 + (Spells.paladin - 19) / 60.0; if dur &gt; (70.0 / 60.0) then dur = (70.0 / 60.0) else dur end</duration>
      <cost type='mana'>19</cost>
      <bonus type='elemental-td'>((50+(bonus = 0; [5,11,18,26,35,45,56,68].each { |n| bonus += 3 if Skills.slreligion &gt;= n }; bonus))/2).to_i</bonus>
      <bonus type='spirit-td'>50+(bonus = 0; [5,11,18,26,35,45,56,68].each { |n| bonus += 3 if Skills.slreligion &gt;= n }; bonus)</bonus>
      <bonus type='sorcerer-td'>((50+(bonus = 0; [5,11,18,26,35,45,56,68].each { |n| bonus += 3 if Skills.slreligion &gt;= n }; bonus))*0.75).to_i</bonus>
      <message type='start'>A muted pale blue sphere surrounds you\.</message>
      <message type='end'>The muted pale blue sphere surrounding you flickers once and shudders before fading completely\.</message>
   </spell>
   <spell availability='all' name='Holy Weapon' number='1625' type='utility'>
      <cost type='mana'>25</cost>
   </spell>
   <spell availability='all' name='Judgment' number='1630' type='attack'>
      <cost type='mana'>30</cost>
   </spell>
   <spell availability='all' name='Divine Intervention' number='1635' type='utility/defense'>
      <cost type='mana'>35</cost>
   </spell>
   <spell availability='all' name='Divine Word' number='1640' type='utility'>
      <cost type='mana'>40</cost>
   </spell>
   <spell availability='all' name='Divine Incarnation' number='1650' type='utility'>
      <duration>10</duration>
      <cost type='mana'>50</cost>
   </spell>
   <spell availability='group' name='Beacon of Courage' number='1699' type='timer'>
      <duration span='refreshable'>1</duration>
      <message type='start'>You feel \w+'s protection extend to you as an incandescent veil coalesces around you\.</message>
      <message type='end'>An incandescent veil fades from you\.</message>
   </spell>

   <spell availability='all' name='Arcane Blast' number='1700' type='attack'>
   </spell>
   <spell availability='all' name='Arcane Decoy' number='1701' type='defense'>
      <duration span='refreshable'>15 + (Skills.magicitemuse/6.0)</duration>
      <cost type='mana'>1</cost>
      <message type='start'>A brilliant, rapidly shifting aura swirls around you\.</message>
      <message type='end'>The brilliant, rapidly shifting aura around you shimmers and (?:flickers briefly before fading\.|bursts in a bright flash!)</message>
   </spell>
   <spell availability='all' name='Stun Cloud' number='1704' type='attack'>
      <cost type='mana'>4</cost>
   </spell>
   <spell availability='all' name='Martial Prowess' number='1705' type='defense'>
      <duration>5</duration>
      <cost type='mana'>5</cost>
      <message type='start'>You feel a wave of strength enter your muscles, and with it a newfound sense of confidence\.</message>
      <message type='end'>You are suddenly overcome by anxiety, but it quickly passes, leaving you feeling only slightly weaker and less assured than you were a moment ago\.</message>
   </spell>
   <spell availability='all' name='Flaming Aura' number='1706' type='attack'>
      <duration>4</duration>
      <cost type='mana'>6</cost>
      <message type='start'>Thin wisps of blue flame suddenly surround your body!</message>
      <message type='end'>The licks of blue flame surrounding you flare up one last time before vanishing with a staticky crackle\.</message>
   </spell>
   <spell availability='all' name='Minor Steam' number='1707' type='attack'>
      <cost type='mana'>7</cost>
   </spell>
   <spell availability='all' name='Mystic Impedance' number='1708' type='attack'>
      <duration>3</duration>
      <cost type='mana'>8</cost>
      <message type='start'>A dizzying array of golden runes surround and suffuse you before being absorbed into your body\.</message>
      <message type='end'>Golden runes enscribe themselves upon your body, quickly fading into nothingness\.</message>
   </spell>
   <spell availability='all' name='Minor Cold' number='1709' type='attack'>
      <cost type='mana'>9</cost>
   </spell>
   <spell availability='all' name='Major Acid' number='1710' type='attack'>
      <cost type='mana'>10</cost>
   </spell>
   <spell availability='self-cast' name='Mystic Focus' number='1711' type='offense'>
      <duration>5</duration>
      <bonus type='elemental-cs'>10 + [20 - Stats.level, 0].max</bonus>
      <bonus type='spirit-cs'>10 + [20 - Stats.level, 0].max</bonus>
      <bonus type='sorcerer-cs'>10 + [20 - Stats.level, 0].max</bonus>
      <message type='start'>A sudden clarity of thought comes over you, and you realize that you now understand arcane mysteries that were previously incomprehensible\.</message>
      <message type='end'>Like a faint wisp of a barely-remembered dream, your brief, enhanced comprehension of arcane mysteries slips away\.</message>
   </spell>
   <spell availability='self-cast' name='Spirit Guard' number='1712' type='defense'>
      <duration span='stackable'>20 + (Skills.magicitemuse/2.0)</duration>
      <bonus type='bolt-ds'>25</bonus>
      <bonus type='physical-ds'>25</bonus>
      <message type='start'>A faint silvery glow surrounds your body\.</message>
      <message type='end'>A faint silvery glow fades from around you\.</message>
   </spell>
   <spell availability='all' name='Death Cloud' number='1713' type='attack' incant='no'/>
   <spell availability='all' name='Firestorm' number='1715' type='attack'/>
   <spell availability='all' name='V&apos;Tull&apos;s Fury' number='1718' type='attack'/>
   <spell availability='all' name='Arcane Barrier' number='1720' type='defense'>
      <duration>30</duration>
      <cost type='mana'>20</cost>
      <message type='start'>A .*? ellipsoid barrier slowly materializes around you and fades through a color spectrum into invisibility\.</message>
      <message type='end'>Your .*? barrier flashes rapidly and the sound of breaking crystal can be heard as it cascades down around you\.</message>
   </spell>
   <spell availability='all' name='Fash&apos;lo&apos;nae&apos;s Gift' number='1750' type='utility'/>
   <spell availability='self-cast' name='Decaying' number='6666' type='timer'>
      <duration persist-on-death='yes'>16</duration>
      <message type='start'>The time left until you decay should never match any game line; it&apos;s specifically handled by infomonitor.lic in order to get the duration and effects right\.  So unless it\&apos;s malfunctioning, don\&apos;t change this\.</message>
      <message type='end'>The time left until you decay should never match any game line; it&apos;s specifically handled by infomonitor.lic in order to get the duration and effects right\.  So unless it\&apos;s malfunctioning, don\&apos;t change this\.</message>
   </spell>
   <spell availability='self-cast' name='Champion&apos;s Might' number='1912' type='offense'>
      <duration span='stackable' multicastable='yes'>20</duration>
      <cost type='mana'>12</cost>
      <bonus type='elemental-cs'>([[3+Spells.paladin,15].max,25].min/2).to_i</bonus>
      <bonus type='spirit-cs'>[[3+Spells.paladin,15].max,25].min</bonus>
      <bonus type='sorcerer-cs'>([[3+Spells.paladin,15].max,25].min*0.75).to_i</bonus>
      <message type='start'>A dim celadon wisp flares briefly about each of your hands, trailing soft pulses of residual light as they move\.</message>
      <message type='end'>The dim celadon wisps about your hands flare up once more and fade completely away\.</message>
   </spell>
   <spell availability='all' name='REIM Attack Boost' number='9301' type='bonus'>
      <duration span='stackable'>1</duration>
      <bonus type='bolt-as'>25</bonus>
      <bonus type='physical-as'>25</bonus>
      <bonus type='elemental-cs'>15</bonus>
      <bonus type='mental-cs'>15</bonus>
      <bonus type='spirit-cs'>15</bonus>
      <bonus type='sorcerer-cs'>15</bonus>
      <cast-proc>fput &quot;reim boost attack&quot;</cast-proc>
      <message type='start'>Crackling wisps of ethereal energy surround your body, bolstering your attack\.</message>
      <message type='end'>The crackling wisps of ethereal energy surrounding your body fade away\.</message>
   </spell>
   <spell availability='all' name='REIM Defense Boost' number='9302' type='bonus'>
      <duration span='stackable'>1</duration>
      <bonus type='bolt-ds'>25</bonus>
      <bonus type='physical-ds'>25</bonus>
      <bonus type='elemental-td'>15</bonus>
      <bonus type='mental-td'>15</bonus>
      <bonus type='spirit-td'>15</bonus>
      <bonus type='sorcerer-td'>15</bonus>
      <cast-proc>fput &quot;reim boost defense&quot;</cast-proc>
      <message type='start'>Tendrils of ethereal energy encase your body, bolstering your defense\.</message>
      <message type='end'>The tendrils of ethereal energy encasing your body fade away\.</message>
   </spell>
   <spell availability='self-cast' name='Tortoise Stance' number='9401' type='defense'>
      <duration multicastable='no' span='refreshable'>240</duration>
      <cost type='stamina'>20</cost>
      <message type='start'>You (?:assume|re-settle into) the Stance of the Tortoise, holding back your offensive power in order to maximize your defense\.</message>
      <message type='end'>You relax from your continuous efforts to maximize your defense\.</message>
      <cast-proc>fput &quot;shield tortoise&quot;</cast-proc>
   </spell>
   <spell availability='all' name='Slash Protection' number='9501' type='defense'>
      <duration>240</duration>
   </spell>
   <spell availability='all' name='Crush Protection' number='9502' type='defense'>
      <duration>240</duration>
   </spell>
   <spell availability='all' name='Puncture Protection' number='9503' type='defense'>
      <duration>240</duration>
   </spell>
   <spell availability='all' name='Armor Support' number='9504' type='bonus'>
      <duration>240</duration>
      <message type='start'>(?:You adjust|[A-Z][a-z]+ adjusts) your .*?, improving its ability to support the weight of your gear\.</message>
   </spell>
   <spell availability='all' name='Armored Evasion' number='9505' type='bonus'>
      <duration>240</duration>
      <message type='start'>(?:You adjust|[A-Z][a-z]+ adjusts) your .*?, improving its comfort and maneuverability\.</message>
      <message type='end'>Your .*? shifts out of place and feels much less comfortable than before\.</message>
   </spell>
   <spell availability='all' name='Armored Casting' number='9506' type='bonus'>
      <duration>240</duration>
   </spell>
   <spell availability='all' name='Armored Fluidity' number='9507' type='bonus'>
      <duration>240</duration>
      <message type='start'>(?:You adjust|[A-Z][a-z]+ adjusts) your .*?, making it easier for you to cast spells\.</message>
      <message type='end'>Your .*? shifts out of place and feels somewhat more hindering\.$</message>
   </spell>
   <spell availability='all' name='Armored Stealth' number='9508' type='bonus'>
      <duration>240</duration>
      <message type='start'>(?:You adjust|[A-Z][a-z]+ adjusts) your .*? to cushion your movements\.</message>
      <message type='end'>Your .*? shifts out of place and no longer cushions your movements\.</message>
   </spell>
   <spell availability='all' name='Armor Reinforcement' number='9509' type='defense'>
      <duration>240</duration>
      <message type='start'>(?:You adjust|[A-Z][a-z]+ adjusts) your .*?, reinforcing weak spots\.</message>
   </spell>
   <spell availability='self-cast' name='Combat Movement' number='9601' type='defense'>
      <duration>3</duration>
      <cost type='stamina'>5</cost>
      <cast-proc>fput &quot;cman cmovement&quot;</cast-proc>
      <message type='start'>Your body becomes tense and ready for action\.</message>
      <message type='end'>Your close concentration on your movements fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Combat Focus' number='9602' type='defense'>
      <duration>3</duration>
      <cost type='stamina'>5</cost>
      <cast-proc>fput &quot;cman focus&quot;</cast-proc>
      <message type='start'>You sharpen your focus on combat and fortify yourself against distractions.</message>
      <message type='end'>Your singular focus on combat slowly drifts away.</message>
   </spell>
   <spell availability='self-cast' name='Shadow Mastery' number='9603' type='utility'>
      <duration>3.13</duration>
      <cost type='stamina'>if Spell[9604].active? then 60 else 20 end</cost>
      <cast-proc>dothistimeout &apos;cman smastery&apos;, 3, /^You focus your mind on the shadows and gird your body for stealth\.(?:  You find maintaining this mindset to be exceptionally tiring\.)?$|^Your muscles ache much too badly to even think about attempting this maneuver\.$/</cast-proc>
      <message type='start'>You focus your mind on the shadows and gird your body for stealth\.(?:  You find maintaining this mindset to be exceptionally tiring\.)?</message>
      <message type='end'>Your body relaxes as your thoughts stray from the shadows\.</message>
   </spell>
   <spell availability='self-cast' name='Shadow Mastery Cooldown' number='9604'>
      <duration>2</duration>
      <message type='start'>Your body relaxes as your thoughts stray from the shadows\.</message>
      <message type='end'>The residual strain on your mind of such intense focus on the shadows fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Surge of Strength' number='9605' type='utility'>
      <duration>1.5</duration>
      <cost type='stamina'>(if Spell[9606].active? then 60 else 30 end)*((Spell[1213].active? and defined?(Spell[1213].stamina_reduction)) ? (1-(Spell[1213].stamina_reduction/100.0)) : 1)</cost>
      <cast-proc>dothistimeout &apos;cman surge&apos;, 3, /^You feel (?:significantly|a great deal|a fair amount) stronger\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$/</cast-proc>
      <message type='start'>You focus deep within yourself, searching for untapped sources of strength[\s\w\.]*</message>
      <message type='end'>You begin to lose touch with your internal sources of strength\.</message>
   </spell>
   <spell availability='self-cast' name='Surge of Strength Cooldown' number='9606'>
      <duration>dur = { nil =&gt; 5, 0 =&gt; 5, 1 =&gt; 5, 2 =&gt; 4, 3 =&gt; 3, 4 =&gt; 2.5, 5 =&gt; 2 }; if defined?(CMan); dur[CMan.surge_of_strength]; else; 5; end</duration>
      <message type='start'>You feel (?:significantly|a great deal|a fair amount) stronger\.</message>
      <message type='end'>Your internal strength fully recovers from your most recent attempt to tap into it\.</message>
   </spell>
   <spell availability='all' name='Berserk' number='9607' type='attack'>
      <duration>5</duration>
      <cast-proc>result = dothistimeout &apos;berserk&apos;, 5, /^Everything around you turns red as you work yourself into a berserker&apos;s rage!|^You rage across the battlefield, striking with unrelenting fury!/; if result; done = false; 450.times { sleep 0.1; if clear.any? { |line| line =~ /^The redness fades from the world/ }; done = true; break; end; break unless GameObj.npcs.any? { |npc| npc.status !~ /dead/ } }; unless done; fput &apos;stop berserk&apos;; end; end</cast-proc>
      <message type='start'>Everything around you turns red as you work yourself into a berserker&apos;s rage!</message>
      <message type='end'>The redness fades from the world and you begin to breathe harder\.</message>
   </spell>
   <spell availability='self-cast' name='Rolling Krynch Stance' number='9620' type='timer'>
      <duration multicastable='no' span='refreshable'>240</duration>
      <cost type='stamina'>20</cost>
      <cast-proc>fput &quot;cman krynch&quot;</cast-proc>
      <message type='start'>You (?:assume|re-settle into) the Rolling Krynch Stance\.</message>
      <message type='end'>You relax from the Rolling Krynch Stance\.</message>
   </spell>
   <spell availability='self-cast' name='Stance of the Mongoose' number='9621' type='timer'>
      <duration multicastable='no' span='refreshable'>240</duration>
      <cost type='stamina'>20</cost>
      <cast-proc>fput &quot;cman mongoose&quot;</cast-proc>
      <message type='start'>You (?:assume|re-settle into) the Stance of the Mongoose, ready to retaliate instantly against your foes\.</message>
      <message type='end'>You relax from the Stance of the Mongoose, no longer ready to retaliate instantly against your foes\.</message>
   </spell>
   <spell availability='self-cast' name='Slippery Mind' number='9622' type='timer'>
      <duration multicastable='no' span='refreshable'>240</duration>
      <cost type='stamina'>20</cost>
      <cast-proc>fput &quot;cman slipp&quot;</cast-proc>
      <message type='start'>You focus inward and prepare to blank your mind at a moment&apos;s notice\.</message>
      <message type='end'>You relax your mind and are no longer prepared to blank it at a moment&apos;s notice\.</message>
   </spell>
   <spell availability='self-cast' name='Flurry of Blows' number='9623' type='timer'>
      <duration multicastable='no' span='refreshable'>240</duration>
      <cost type='stamina'>30</cost>
      <cast-proc>fput &quot;cman flurry&quot;</cast-proc>
      <message type='start'>You (?:assume|re-settle into) a stance suitable to unleash a flurry of blows\.</message>
      <message type='end'>You relax from a stance suitable to unleash a flurry of blows\.</message>
   </spell>
   <spell availability='self-cast' name='Inner Harmony' number='9624' type='timer'>
      <duration multicastable='no' span='refreshable'>240</duration>
      <cost type='stamina'>40</cost>
      <cast-proc>fput &quot;cman iharm&quot;</cast-proc>
      <message type='start'>You (?:center your mind, body and soul and enter a|continue in your) state of inner harmony\.</message>
      <message type='end'>You feel your state of inner harmony slip away\.</message>
   </spell>
   <spell availability='self-cast' name='Burst of Swiftness' number='9625' type='utility'>
      <duration>1.5</duration>
      <cost type='stamina'>(if Spell[9051].active?; 60; else; 30; end)*((Spell[1213].active? and defined?(Spell[1213].stamina_reduction)) ? (1-(Spell[1213].stamina_reduction/100.0)) : 1)</cost>
      <cast-proc>dothistimeout &apos;cman burst&apos;, 3, /^You feel (?:significantly|a great deal|a fair amount) more (?:agile|dextrous)\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$/</cast-proc>
      <message type='start'>You prepare yourself to move swiftly at a moment&apos;s notice.*</message>
      <message type='end'>You feel less prepared to move as swiftly as before\.</message>
   </spell>
   <spell availability='self-cast' name='Ki Focus' number='9626' type='offense'>
      <duration>1.0</duration>
      <cost type='stamina'>20+5+5</cost> <!-- fixme: rank dependent cost but no CMan.kifocus in lich.rb -->
      <cast-proc>dothistimeout &apos;cman kifocus&apos;, 3, /^You summon your inner ki|^You have already summoned your inner ki/</cast-proc>
      <message type='start'>You summon your inner ki and focus it to enhance your next attack\.</message>
      <message type='start'>You have already summoned your inner ki and are ready for a devastating attack\.</message>
      <message type='end'>You lose the intense focus of your ki energy\.</message>
   </spell>
   <spell availability='self-cast' name='Duck and Weave' number='9627' type='utility'>
      <duration span='refreshable'>0.5</duration>
      <cost type='stamina'>(if Spell[9052].active?; 90; else; 30; end)*((Spell[1213].active? and defined?(Spell[1213].stamina_reduction)) ? (1-(Spell[1213].stamina_reduction/100.0)) : 1)</cost>
      <cast-proc>dothistimeout &apos;cman weave&apos;, 3, /^You balance your posture and narrow your eyes, preparing to misdirect your foes' attacks\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$/</cast-proc>
      <message type='start'>You balance your posture and narrow your eyes, preparing to misdirect your foes' attacks\.</message>
      <message type='end'>You relax your posture and blink to clear your eyes\.</message>
   </spell>
   <spell availability='self-cast' name='Griffin&apos;s Voice' number='9628' type='timer'>
      <duration multicastable='no' span='refreshable'>240</duration>
      <cost type='stamina'>20</cost>
      <cast-proc>fput &quot;cman griffin&quot;</cast-proc>
      <message type='start'>You assume the Griffin's Voice stance, altering your breathing patterns to maximize the efficiency of your warcries\.</message>
      <message type='end'>You return to your normal breathing patterns\.</message>
   </spell>
   <spell availability='self-cast' name='POPed muscles' number='9699'>
      <duration>10.5</duration>
      <message type='start'>You hear a loud \*POP\* come from your muscles!</message>
      <message type='end'>Your muscles (?:feel much less strained than|no longer feel as weak as) they did a moment ago\.|The soreness of your overexerted muscles evaporates, leaving you feeling fresh and rested\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Recognition' number='9701' type='utility'>
      <cast-proc>fput &quot;sigil of recognition&quot;</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sigil of Location' number='9702' type='utility'>
      <cast-proc>fput &quot;sigil of location&quot;</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sigil of Contact' number='9703' type='utility'>
      <duration span='stackable'>17</duration>
      <cost type='mana'>1</cost>
      <cast-proc>dothistimeout &apos;sigil of contact&apos;, 3, /^You feel your mind open up to the world around you\.$|^The distant thoughts in your mind feel stronger\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <message type='start'>You concentrate on your sigil\.</message>
      <message type='end'>You sense that your attunement to the minds of others has ceased\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Resolve' number='9704' type='utility'>
      <duration>1.5</duration>
      <cost type='stamina'>5</cost>
      <cast-proc>dothistimeout &apos;sigil of resolve&apos;, 3, /^You experience a momentary flash of insight on how to best overcome nature&apos;s obstacles\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <message type='start'>You experience a momentary flash of insight on how to best overcome nature&apos;s obstacles\.</message>
      <message type='end'>You feel your added insight slip away\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Minor Bane' number='9705' type='offense'>
      <duration>1</duration>
      <cost type='mana'>3</cost>
      <cost type='stamina'>3</cost>
      <cast-proc>dothistimeout &apos;sigil of minor bane&apos;, 3, /^As you concentrate on your sigil, you become slightly more aware of your foes and the weakest spots in their defenses\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <message type='start'>As you concentrate on your sigil, you become slightly more aware of your foes and the weakest spots in their defenses\.</message>
      <message type='end'>Your heightened awareness of your foes fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Bandages' number='9706' type='utility'>
      <duration>3</duration>
      <cost type='stamina'>10</cost>
      <cast-proc>dothistimeout &apos;sigil of bandages&apos;, 3, /^Your awareness of your own movements heightens as you begin to act with an unusual fluidity\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <message type='start'>Your awareness of your own movements heightens as you begin to act with an unusual fluidity\.</message>
      <message type='end'>Your actions become less fluid as your close concentration on your movements begins to falter\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Defense' number='9707' type='defense'>
      <duration>5</duration>
      <cost type='mana'>5</cost>
      <cost type='stamina'>5</cost>
      <cast-proc>dothistimeout &apos;sigil of defense&apos;, 3, /^A shimmering aura surrounds you\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <bonus type='bolt-ds'>Society.rank</bonus>
      <bonus type='physical-ds'>Society.rank</bonus>
      <message type='start'>A shimmering aura surrounds you\.</message>
      <message type='end'>The shimmering aura fades from around you\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Offense' number='9708' type='offense'>
      <duration>5</duration>
      <cost type='mana'>5</cost>
      <cost type='stamina'>5</cost>
      <cast-proc>dothistimeout &apos;sigil of offense&apos;, 3, /^A faint blue glow surrounds your hands, subtly guiding your movements\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <bonus type='bolt-as'>Society.rank</bonus>
      <bonus type='physical-as'>Society.rank</bonus>
      <message type='start'>A faint blue glow surrounds your hands, subtly guiding your movements\.</message>
      <message type='end'>The faint blue glow fades from around your hands\.</message>
   </spell>
   <spell availability='all' name='Sigil of Distraction' number='9709' type='attack'>
      <duration>5</duration>
      <cost type='mana'>5</cost>
      <cost type='stamina'>10</cost>
      <cast-proc>dothistimeout &apos;sigil of distraction&apos;, 3, /^You carefully school your thoughts, focusing on the thresholds of disorder inherent in your environs, and etch the Sigil of Distraction in the air before you\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sigil of Minor Protection' number='9710' type='defense'>
      <duration max='3.0' span='stackable'>1</duration>
      <cost type='mana'>5</cost>
      <cost type='stamina'>10</cost>
      <cast-proc>dothistimeout &apos;sigil of minor protection&apos;, 3, /^As you concentrate on your sigil, you become slightly more aware of weak spots in your defenses\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <bonus type='bolt-ds'>5</bonus>
      <bonus type='physical-ds'>5</bonus>
      <message type='start'>As you concentrate on your sigil, you become slightly more aware of weak spots in your defenses\.</message>
      <message type='end'>Your heightened awareness of your own defensive weaknesses fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Focus' number='9711' type='defense'>
      <duration max='3.0' span='stackable'>1</duration>
      <cost type='mana'>5</cost>
      <cost type='stamina'>5</cost>
      <cast-proc>dothistimeout &apos;sigil of focus&apos;, 3, /^You feel your mind and body gird themselves against magical interference\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <bonus type='elemental-td'>Society.rank</bonus>
      <bonus type='spirit-td'>Society.rank</bonus>
      <bonus type='sorcerer-td'>Society.rank</bonus>
      <message type='start'>You feel your mind and body gird themselves against magical interference\.</message>
      <message type='end'>Your mind and body begin to relax after that period of intense focus\.</message>
   </spell>
   <spell availability='all' name='Sigil of Intimidation' number='9712' type='attack'>
      <cost type='mana'>if checkpcs.length &gt; 1 then 10 else 5 end</cost>
      <cost type='stamina'>if checkpcs.length &gt; 1 then 15 else 10 end</cost>
      <cast-proc>dothistimeout &apos;sigil of intimidation&apos;, 3, /^You carefully school your thoughts, focusing on the enhancement of your aspect and bearing, and etch the Sigil of Intimidation in the air before you\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sigil of Mending' number='9713' type='utility'>
      <duration>10</duration>
      <cost type='mana'>10</cost>
      <cost type='stamina'>15</cost>
      <cast-proc>dothistimeout &apos;sigil of mending&apos;, 3, /^Your heart begins to beat faster as your entire body becomes awash with a pleasantly warm sensation\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <message type='start'>Your heart begins to beat faster as your entire body becomes awash with a pleasantly warm sensation\.</message>
      <message type='end'>The pleasantly warm sensation fades as your heart beat begins to return to normal\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Concentration' number='9714' type='bonus'>
      <duration>10</duration>
      <cost type='stamina'>30</cost>
      <cast-proc>dothistimeout &apos;sigil of concentration&apos;, 3, /^As you concentrate on your sigil, you feel more attuned to the flows of mana\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <message type='start'>As you concentrate on your sigil, you feel more attuned to the flows of mana\.</message>
      <message type='end'>Your heightened attunement to the flows of mana begins to fade\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Major Bane' number='9715' type='offense'>
      <duration>1</duration>
      <cost type='mana'>10</cost>
      <cost type='stamina'>10</cost>
      <cast-proc>dothistimeout &apos;sigil of major bane&apos;, 3, /^As you concentrate on your sigil, you become much more aware of your foes and the most vulnerable portions of their bodies\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <bonus type='bolt-as'>10</bonus>
      <bonus type='physical-as'>10</bonus>
      <message type='start'>As you concentrate on your sigil, you become much more aware of your foes and the most vulnerable portions of their bodies\.</message>
      <message type='end'>Your heightened awareness of your foes fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Determination' number='9716' type='utility'>
      <duration>3</duration>
      <cost type='stamina'>30</cost>
      <cast-proc>dothistimeout &apos;sigil of determination&apos;, 3, /^You begin to focus sharply upon the task at hand, pushing all thoughts and sensations of pain far from your mind\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <message type='start'>You begin to focus sharply upon the task at hand, pushing all thoughts and sensations of pain far from your mind\.</message>
      <message type='end'>Your sharp concentration upon your current task falters as the pain of your injuries rushes back into your mind\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Health' number='9717' type='utility'>
      <cost type='mana'>10</cost>
      <cost type='stamina'>20</cost>
      <cast-proc>dothistimeout &apos;sigil of health&apos;, 3, /^As you concentrate on your sigil, you feel a brief surge of vitality course throughout your body\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sigil of Power' number='9718' type='utility'>
      <cost type='stamina'>50</cost>
      <cast-proc>dothistimeout &apos;sigil of power&apos;, 3, /^As you concentrate on your sigil, you feel exceptionally tired as your physical energy rapidly transforms into magical energy\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sigil of Major Protection' number='9719' type='defense'>
      <duration max='3.0' span='stackable'>1</duration>
      <cost type='mana'>10</cost>
      <cost type='stamina'>15</cost>
      <cast-proc>dothistimeout &apos;sigil of major protection&apos;, 3, /^As you concentrate on your sigil, you become much more aware of vulnerable spots in your defenses\.$|^Your muscles ache much too badly to even think about attempting this maneuver\.$|^The power from your sigil dissipates into the air\.$/</cast-proc>
      <bonus type='bolt-ds'>10</bonus>
      <bonus type='physical-ds'>10</bonus>
      <message type='start'>As you concentrate on your sigil, you become much more aware of vulnerable spots in your defenses\.</message>
      <message type='end'>Your heightened awareness of your own vulnerabilities fades away\.</message>
   </spell>
   <spell availability='self-cast' name='Sigil of Escape' number='9720' type='utility'>
      <cost type='mana'>15</cost>
      <cost type='stamina'>75</cost>
      <cast-proc>fput &quot;sigil of escape&quot;</cast-proc>
   </spell>
   <spell availability='self-cast' name='Symbol of Recognition' number='9801' type='utility'>
      <cast-proc>dothistimeout &quot;symbol of recognition&quot;, 5, /^There are no undead creatures present\.|^You recognize no fellow members|is and undead creature\.|is a member of the Order of Voln\./</cast-proc>
   </spell>
   <spell availability='self-cast' name='Symbol of Blessing' number='9802' type='utility'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;symbol of blessing#{target}&quot;, 5, /^You must specify something\.|^A wave of power flows outward from you|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Symbol of Thought' number='9803' type='utility'>
      <cast-proc>fput &quot;&quot;</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Diminishment' number='9804' type='attack'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;symbol of diminishment#{target}&quot;, 5, /^What were you referring to\?|^You draw a glowing pattern in the air|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Symbol of Courage' number='9805' type='offense'>
      <duration span='stackable'>Society.rank / 6.0</duration>
      <cast-proc>dothistimeout &quot;symbol of courage&quot;, 5, /^You feel more courageous\.|^You strain to perform the symbol/</cast-proc>
      <bonus type='bolt-as'>Society.rank</bonus>
      <bonus type='physical-as'>Society.rank</bonus>
      <message type='start'>You feel more courageous\.</message>
      <message type='end'>You feel the extra courage wane\.</message>
   </spell>
   <spell availability='self-cast' name='Symbol of Protection' number='9806' type='defense'>
      <duration span='stackable'>Society.rank / 3.0</duration>
      <cast-proc>dothistimeout &quot;symbol of protection&quot;, 5, /^You feel a layer of protection surround you\.|^You strain to perform the symbol/</cast-proc>
      <bonus type='bolt-ds'>Society.rank</bonus>
      <bonus type='physical-ds'>Society.rank</bonus>
      <bonus type='elemental-td'>Society.rank/2</bonus>
      <bonus type='mental-td'>Society.rank/2</bonus>
      <bonus type='spirit-td'>Society.rank/2</bonus>
      <bonus type='sorcerer-td'>Society.rank/2</bonus>
      <message type='start'>You feel a layer of protection surround you\.</message>
      <message type='end'>The layer of protection fades away\.</message>
   </spell>
   <spell availability='all' name='Symbol of Submission' number='9807' type='attack'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;symbol of submission#{target}&quot;, 5, /^What were you referring to\?|^You feel the power of the symbol project|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Kai&apos;s Strike' number='9808'>
      <cast-proc>fput &quot;&quot;</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Holiness' number='9809' type='attack'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;symbol of holiness#{target}&quot;, 5, /^What were you referring to\?|^A wave of power flows out of you|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Recall' number='9810' type='utility'>
      <cast-proc>fput &quot;symbol of recall&quot;</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Sleep' number='9811' type='attack'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;symbol of sleep#{target}&quot;, 5, /^You draw a glowing pattern in the air|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Transcendence' number='9812' type='defense'>
      <duration>0.5</duration>
      <cast-proc>dothistimeout &quot;symbol of transcendence#{target}&quot;, 5, /^You step into the space between the corporeal and ethereal realms\.|^You have already stepped into the space between the corporeal and ethereal realms\.|^The bonds of the corporeal realm hold fast and you remain fully within its grasp\.|^You strain to perform the symbol/</cast-proc>
      <message type='start'>(?:With difficulty, you manage to will yourself|You step) into the space between the corporeal and ethereal realms\.</message>
   </spell>
   <spell availability='all' name='Symbol of Mana' number='9813' type='utility'>
      <cast-proc>dothistimeout &apos;symbol of mana&apos;, 5, /^You call upon a special blessing from Koar.|^You are already at your maximum mana level\.|^You must CONFIRM that you wish to use this symbol during its recovery period\.|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Sight' number='9814' type='utility'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;symbol of sight#{target}&quot;, 5, /^You concentrate|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Retribution' number='9815' type='attack/utility'>
      <duration span='stackable'>Society.rank / 6.0</duration>
      <cast-proc>fput &quot;symbol of retribution&quot;</cast-proc>
      <message type='start'>You feel an aura of righteous wrath surround you\.</message>
      <message type='end'>The aura of righteous wrath leaves you\.</message>
   </spell>
   <spell availability='self-cast' name='Symbol of Supremacy' number='9816' type='offensive'>
      <duration span='stackable'>Society.rank / 6.0</duration>
      <cast-proc>dothistimeout &apos;symbol of supremacy&apos;, 5, /^You feel infused with a collective knowledge on the undead and their weaknesses\.|^You strain to perform the symbol/</cast-proc>
      <message type='start'>You feel infused with a collective knowledge on the undead and their weaknesses\.</message>
      <message type='end'>The rush of collective knowledge of the undead fades from your mind\.</message>
   </spell>
   <spell availability='all' name='Symbol of Restoration' number='9817' type='utility'>
      <cast-proc>dothistimeout &apos;symbol of restoration&apos;, 5, /^The power of the symbol begins to rise in you, but then fades\.|^You feel the power of the symbol course through your body\.|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Need' number='9818' type='utility'>
      <cast-proc>fput &quot;symbol of need&quot;</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Renewal' number='9819' type='utility'>
      <cast-proc>dothistimeout &apos;symbol of renewal&apos;, 5, /^You are already at your maximum spirit level\.|^You call upon the vitality of nature to renew your soul\.|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Disruption' number='9820' type='offensive'>
      <cast-proc>dothistimeout &apos;symbol of disruption&apos;, 5, /^A churning spectral aura surrounds you|^You strain to perform the symbol/</cast-proc>
      <duration span='stackable'>Society.rank / 6.0</duration>
      <message type='start'>A churning spectral aura surrounds you(?: and your group)?\.</message>
      <message type='end'>The churning spectral aura suddenly vanishes from around you\.</message>
   </spell>
   <spell availability='all' name='Kai&apos;s Smite' number='9821' type='attack'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;smite#{target}&quot;, 5, /^You currently have no valid target\.  You will need to specify one\.|doesn&apos;t appear to be suffering from the curse of undeath\.|^You .*?smite/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Turning' number='9822' type='attack'>
      <cast-proc>if defined?(target); if target.class == GameObj; target = &quot; ##{target.id}&quot;; elsif target.class == Fixnum; target = &quot; ##{target}&quot;; else; target = &quot; #{target}&quot;; end; else; target = &quot;&quot;; end; dothistimeout &quot;symbol of turning#{target}&quot;, 5, /^You draw a glowing pattern in the air|^You strain to perform the symbol/</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Preservation' number='9823' type='utility'>
      <cast-proc>fput &quot;symbol of preservation&quot;</cast-proc>
   </spell>
   <spell availability='self-cast' name='Symbol of Dreams' number='9824' type='utility'>
      <duration>240</duration>
      <cast-proc>fput &quot;symbol of dreams&quot;</cast-proc>
      <message type='start'>You feel suddenly tired and lie down for a nap\.</message>
      <message type='end'>Your sleep is interrupted\.|You wake up from your sleep\.</message>
   </spell>
   <spell availability='all' name='Symbol of Return' number='9825' type='utility'>
      <cast-proc>fput &quot;symbol of return&quot;</cast-proc>
   </spell>
   <spell availability='all' name='Symbol of Seeking' number='9826' type='utility'>
      <cast-proc>fput &quot;symbol of seeking&quot;</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sign of Recognition' number='9901' type='utility'>
      <cast-proc>dothistimeout &apos;sign of recognition&apos;, 3, /^You (?:touch|scratch|rub|tap|point to) your (?:right|left) (?:eyebrow|nostril|earlobe|shoulder|cheek) with your (?:right|left) (?:pinky|forefinger|thumb|index finger)\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sign of Warding' number='9903' type='defense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='mana'>1</cost>
      <cast-proc>dothistimeout &apos;sign of warding&apos;, 3, /^Your dancing fingers weave a web of protection around you!$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-ds'>5</bonus>
      <bonus type='physical-ds'>5</bonus>
      <message type='start'>Your dancing fingers weave a web of protection around you!</message>
      <message type='end'>Your SIGN OF WARDING is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Striking' number='9904' type='offense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='mana'>1</cost>
      <cast-proc>dothistimeout &apos;sign of striking&apos;, 3, /^You (?:flex your muscles|grip your .*?) with renewed vigor!$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-as'>5</bonus>
      <bonus type='physical-as'>5</bonus>
      <message type='start'>You (?:grip|flex) your [\w\s']+ with renewed vigor!</message>
      <message type='end'>Your SIGN OF STRIKING is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Clotting' number='9905' type='utility'>
      <duration>1+(Stats.level/6.0)</duration>
      <cost type='mana'>1</cost>
      <cast-proc>dothistimeout &apos;sign of clotting&apos;, 3, /^Your veins throb and your blood sings\.$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sign of Thought' number='9906' type='utility'>
      <duration span='stackable'>10 + Stats.level / 10.0</duration>
      <cost type='mana'>1</cost>
      <cast-proc>dothistimeout &apos;sign of thought&apos;, 3, /^Your hypnotic gesture makes your mind receptive to the thoughts of others\.  You feel their distant, comforting presence\.$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <message type='start'>Your hypnotic gesture makes your mind receptive to the thoughts of others\.  You feel their distant, comforting presence\.</message>
      <message type='end'>You sense that your attunement to the minds of others has ceased\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Defending' number='9907' type='defense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='mana'>2</cost>
      <cast-proc>dothistimeout &apos;sign of defending&apos;, 3, /^Your dancing fingers weave a web of protection around you!$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-ds'>10</bonus>
      <bonus type='physical-ds'>10</bonus>
      <message type='start'>Your dancing fingers weave a web of protection around you!</message>
      <message type='end'>Your SIGN OF DEFENDING is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Smiting' number='9908' type='offense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='mana'>2</cost>
      <cast-proc>dothistimeout &apos;sign of smiting&apos;, 3, /^You (?:flex your muscles|grip your .*?) with renewed vigor!$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-as'>10</bonus>
      <bonus type='physical-as'>10</bonus>
      <message type='start'>You (?:grip|flex) your [\w\s']+ with renewed vigor!</message>
      <message type='end'>Your SIGN OF SMITING is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Staunching' number='9909' type='utility'>
      <duration>2 + Stats.level / 3.0</duration>
      <cost type='mana'>1</cost>
      <cast-proc>dothistimeout &apos;sign of staunching&apos;, 3, /^Your veins throb and your blood sings\.$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <message type='start'>Your veins throb and your blood sings\.</message>
      <message type='end'>Your SIGN OF (?:STAUNCHING|CLOTTING) is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Deflection' number='9910' type='defense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='mana'>3</cost>
      <cast-proc>dothistimeout &apos;sign of deflection&apos;, 3, /^You feel magical energies distort and flow around you\.$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-ds'>20</bonus>
      <message type='start'>You feel magical energies distort and flow around you\.</message>
      <message type='end'>Your SIGN OF DEFLECTION is no longer effective\.</message>
   </spell>
   <spell availability='all' name='Sign of Hypnosis' number='9911' type='attack'>
      <cost type='spirit'>1</cost>
      <cast-proc>dothistimeout &apos;sign of hypnosis&apos; 3, /^You project your will upon your opponents!|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sign of Swords' number='9912' type='offense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='spirit'>1</cost>
      <cast-proc>dothistimeout &apos;sign of swords&apos;, 3, /^You (?:flex your muscles|grip your .*?) with renewed vigor!$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-as'>20</bonus>
      <bonus type='physical-as'>20</bonus>
      <message type='start'>You (?:grip|flex) your [\w\s']+ with renewed vigor!</message>
      <message type='end'>Your SIGN OF SWORDS is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Shields' number='9913' type='defense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='spirit'>1</cost>
      <cast-proc>dothistimeout &apos;sign of shields&apos;, 3, /^Your dancing fingers weave a web of protection around you!$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-ds'>20</bonus>
      <bonus type='physical-ds'>20</bonus>
      <message type='start'>Your dancing fingers weave a web of protection around you!</message>
      <message type='end'>Your SIGN OF SHIELDS is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Dissipation' number='9914' type='defense'>
      <duration>1 + Stats.level / 6.0</duration>
      <cost type='spirit'>1</cost>
      <cast-proc>dothistimeout &apos;sign of dissipation&apos;, 3, /^Magic flows towards you, but does not reach you\.$|^Repeating the sign has no effect!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='elemental-td'>15</bonus>
      <bonus type='mental-td'>15</bonus>
      <bonus type='spirit-td'>15</bonus>
      <bonus type='sorcerer-td'>15</bonus>
      <message type='start'>Magic flows towards you, but does not reach you\.</message>
      <message type='end'>Your SIGN OF DISSIPATION is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Healing' number='9915' type='utility'>
      <cost type='spirit'>2</cost>
      <cast-proc>dothistimeout &apos;sign of healing&apos;, 3, /^You shudder as your life force is torn and reshaped!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sign of Madness' number='9916' type='offense'>
      <duration>0.25</duration>
      <cost type='spirit'>3</cost>
      <cast-proc>dothistimeout &apos;sign of madness&apos;, 3, /^You are filled with berserk rage!  Attack!  Attack!  Attack!$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-as'>50</bonus>
      <bonus type='physical-as'>50</bonus>
      <message type='start'>You are filled with berserk rage!  Attack!  Attack!  Attack!</message>
      <message type='end'>Your SIGN OF MADNESS is no longer effective\.</message>
   </spell>
   <spell availability='self-cast' name='Sign of Possession' number='9917' type='attack'>
      <cost type='spirit'>4</cost>
      <cast-proc>dothistimeout &apos;sign of possession&apos; 3, /^You project your will upon your opponents!|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
      <bonus type='bolt-as'>50</bonus>
      <bonus type='physical-as'>50</bonus>
   </spell>
   <spell availability='self-cast' name='Sign of Wracking' number='9918' type='utility'>
      <cost type='spirit'>5</cost>
      <cast-proc>result = nil; loop { waitrt?; waitcastrt?; if percentmana == 100; result = true; break; end; unless Spell[9918].affordable?; result = false; break; end; put &apos;sign of wracking&apos;; 20.times { sleep 0.1; while line = get?; if line == &apos;You shudder as your life force is torn and reshaped!&apos;; result = true; break; elsif line =~ /^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^I don&apos;t think so\.$/; result = false; break; end; end; break unless result.nil? }; break unless result.nil?; dothis &apos;help no-double-wrack&apos;, /^No help files matching that entry were found\.$/ }; result</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sign of Darkness' number='9919' type='utility'>
      <cost type='spirit'>6</cost>
      <cast-proc>dothistimeout &apos;sign of darkness&apos; 3, /^Darkness enfolds and surrounds you\.\.\.$|^Your punishment does not end for another [0-9]+ minutes?\.$|^The power from your sign dissipates into the air\.$|^You realize your powers would be useless here, and cease your action\.$|^I don&apos;t think so\.$/</cast-proc>
   </spell>
   <spell availability='self-cast' name='Sign of Hopelessness' number='9920' type='utility'>
      <cost type='spirit'>11</cost>
      <cast-proc>echo &apos;.cast called for spell 9920 (Sign of Hopelessness)... what the hell is wrong with you?&apos;</cast-proc>
   </spell>
   <spell availability='self-cast' name='Next Bounty' number='9003' type='timer'>
      <duration persist-on-death='yes' real-time='yes'>15</duration>
      <message type='start'>[A-Z][a-z]+ says, &quot;Hmm, I&apos;ve got a task here|^[A-Z][a-z]+ says, &quot;I&apos;ve got a special mission for you.*</message>
      <message type='start'>You reach for the large board and select a posted task at random\.</message>
      <message type='start'>^You were tasked with (?:hunting|sinking) </message>
      <message type='start'>^You were tasked with slaying [0-9]+ pirates\.</message>
   </spell>
   <spell availability='self-cast' name='Next Group Bounty' number='9056' type='timer'>
      <duration persist-on-death='yes' real-time='yes'>15</duration>
      <message type='start'>[A-Z][a-z]+ turns to you and says, "[A-Z][a-z]+ has signed you up to join (?:him|her) on (?:his|her) task\.  I trust that s?he has adequately informed you of the nature of the task.*</message>
   </spell>
   <spell availability='self-cast' name='Next GoS Task' number='9004' type='timer'>
      <duration>15</duration>
      <message type='start'>[A-Z][a-z]+ nods to you.*?Grimswarm.*</message>
   </spell>
   <spell availability='all' name='MStrike Cooldown' number='9005' type='timer'>
      <duration>1</duration>
      <message type='start'>Your (?:flurry|series) of (?:strikes|rapid shots)(?: and (?:ripostes|maneuvers))? leaves you (?:off-balance|winded) and out of position\.</message>
   </spell>
   <spell availability='all' name='Lichbane' number='9006' type='defense'>
      <duration>10</duration>
      <message type='start'>You feel more courageous as a \w+ aura appears about you\.</message>
      <message type='end'>The sense of courage departs as the \w+ aura fades from about you\.</message>
   </spell>
   <spell availability='all' name='Well of Life Cooldown' number='9007' type='timer'>
      <duration>if defined?(XMLData.last_spirit); ([XMLData.last_spirit-XMLData.spirit,1].max*2) - (Skills.slblessings/60.0); else; 6; end</duration>
      <message type='start'>You are left feeling weakened and feeble\.</message>
      <message type='end'>The feeling of weakness fades from you\. You feel ripe to transfer spirit once again\.</message>
   </spell>
   <spell availability='all' name='Sacrifice Cooldown' number='9008' type='timer'>
      <duration>10.0 - ([Skills.slnecromancy, 120].min * 2)/60.0 - ([[(Skills.slnecromancy - 120), 0].max, 80].min * 0.75)/60.0 - ([(Skills.slnecromancy - 200), 0].max * 1.5)/60.0</duration>
      <message type='start'>Your senses tingle, then become awash in a flood of power as the life leaves your hapless foe!</message>
      <message type='end'>You feel refreshed enough to sacrifice another animus\.</message>
   </spell>
   <spell availability='all' name='Raise Dead Cooldown' number='9009' type='timer'>
      <duration persist-on-death='yes'>s = Spell['Raise Dead Cooldown']; if s.active?; s.timeleft; else; if reget.any? { |line| line =~ /^You have a foreboding sense of darkness enveloping your soul as you realize [A-Z][a-z]+ has died while both of you are still soul linked!  You can sense the tugging of [A-Z][a-z]+&apos;s? soul clinging on to life, pulling you headlong into the long dark\.  It takes every ounce of spiritual energy you have to sever the link and claw yourself back to the world of the living!  You feel empty and torpid, unable to focus your spiritual self\./ }; 60.0; else; 5-(Skills.slblessings/60.0)+0.05; end; end</duration>
      <message type='start'>Moisture beads upon your skin and you feel your eyes cloud over with the darkness of a rising storm\.  Power builds upon the air, and when you utter the last syllable of your spell thunder rumbles from your lips\.  The sound ripples upon the air, colliding with [A-Z][a-z]+'s prone form, and a brilliant flash transfers the spiritual energy between you\.</message>
      <message type='start'>You have a foreboding sense of darkness enveloping your soul as you realize [A-Z][a-z]+ has died while both of you are still soul linked!  You can sense the tugging of [A-Z][a-z]+&apos;s? soul clinging on to life, pulling you headlong into the long dark\.  It takes every ounce of spiritual energy you have to sever the link and claw yourself back to the world of the living!  You feel empty and torpid, unable to focus your spiritual self\.</message>
      <message type='start'>You are unable to gather enough strength to focus your spirit\.  Perhaps you should rest some\.</message>
      <message type='start'>Deep and resonating, you feel the chant that falls from your lips instill within you with the strength of your faith\.  You crouch beside [A-Z][a-z]+ and gently lift (?:he|she|him|her) into your arms, your muscles swelling with the power of your deity, and cradle (?:him|her) close to your chest\.  Strength and life momentarily seep from your limbs, causing them to feel laden and heavy, and you are overcome with a sudden weakness\.  With a sigh, you are able to lay [A-Z][a-z]+ back down\.</message>
      <message type='start'>Moisture beads upon your skin and you feel your eyes cloud over with the darkness of a rising storm\.  Power builds upon the air and when you utter the last syllable of your spell thunder rumbles from your lips\.  The sound ripples upon the air, and colling with [A-Z][a-z&apos;]+ prone form and a brilliant flash transfers the spiritual energy between you\.</message>
      <message type='start'>Lifting your finger, you begin to chant and draw a series of conjoined circles in the air\.  Each circle turns to mist and takes on a different hue - white, blue, black, red, and green\.  As the last ring is completed, you spread your fingers and gently allow your tips to touch each color before pushing the misty creation towards [A-Z][a-z]+\.  A shock of energy courses through your body as the mist seeps into [A-Z][a-z&apos;]+ chest and life is slowly returned to (?:his|her) body\.</message>
      <message type='start'>Crouching beside the prone form of [A-Z][a-z]+, you softly issue the last syllable of your chant\.  Breathing deeply, you take in the scents around you and let the feel of your surroundings infuse you\.  With only your gaze, you track the area and recreate the circumstances of [A-Z][a-z&apos;]+ within your mind\.  Touching [A-Z][a-z]+, you follow the lines of the web that holds (?:his|her) soul in place and force it back into (?:his|her) body\.  Raw energy courses through you and you feel your sense of justice and vengeance filling [A-Z][a-z]+ with life\.</message>
      <message type='start'>Murmuring softly, you call upon your connection with the Destroyer,? and feel your words twist into an alien, spidery chant\.  Dark shadows laced with crimson swirl before your eyes and at your forceful command sink into the chest of [A-Z][a-z]+\.  The transference of energy is swift and immediate as you bind [A-Z][a-z]+ back into (?:his|her) body\.</message>
      <message type='start'>Rich and lively, the scent of wild flowers suddenly fills the air as you finish your chant, and you feel alive with the energy of spring\.  With renewal at your fingertips, you gently touch [A-Z][a-z]+ on the brow and revel in the sweet rush of energy that passes through you into (?:him|her|his)\.</message>
      <message type='start'>Breathing slowly, you extend your senses towards the world around you and draw into you the very essence of nature\.  You shift your gaze towards [A-z][a-z]+ and carefully release the energy you&apos;ve drawn into yourself towards (?:him|her)\.  A rush of energy briefly flows between the two of you as you feel life slowly return to (?:him|her)\.</message>
      <message type='start'>Your surroundings grow dim\.\.\.you lapse into a state of awareness only, unable to do anything\.\.\.</message>
      <message type='start'>Murmuring softly, a mournful chant slips from your lips and you feel welts appear upon your wrists\.  Dipping them briefly, you smear the crimson liquid the leaks from these sudden wounds in a thin line down [A-Z][a-z&apos;]+ face\.  Tingling with each second that your skin touches (?:his|hers), you feel the transference of your raw energy pass into [A-Z][a-z]+ and momentarily reel with the pain of its release\.  Slowly, the wounds on your wrists heal, though a lingering throb remains\.</message>
      <message type='start'>Emptying all breathe from your body, you slowly still yourself and close your eyes\.  You reach out with all of your senses and feel a film shift across your vision\.  Opening your eyes, you gaze through a white haze and find images of [A-Z][a-z]+ floating above his prone form\.  Acts of [A-Z][a-z]&apos;s? past, present, and future play out before your clouded vision\.  With conviction and faith, you pluck a future image of [A-Z][a-z]+ from the air and coax (?:he|she|his|her) back into (?:he|she|his|her) body\.  Slowly, the film slips from your eyes and images fade away\.</message>
      <message type='start'>Thin at first, a fine layer of rime tickles your hands and fingertips\.  The hoarfrost smoothly glides between you and [A-Z][a-z]+, turning to a light powder as it traverses the space\.  The white substance clings to [A-Z][a-z]+&apos;s? eyelashes and cheeks for a moment before it becomes charged with spiritual power, then it slowly melts away\.</message>
      <message type='start'>As you begin to chant,? you notice the scent of dry, dusty parchment and feel a cool mist cling to your skin somewhere near your feet\.  You sense the ethereal tendrils of the mist as they coil about your body and notice that the world turns to a yellowish hue as the mist settles about your head\.  Focusing on [A-Z][a-z]+, you feel the transfer of energy pass between you as you return (?:him|her) to life\.</message>
      <message type='start'>Wrapped in an aura of chill, you close your eyes and softly begin to chant\.  As the cold air that surrounds you condenses you feel it slowly ripple outward in waves that turn the breath of those nearby into a fine mist\.  This mist swiftly moves to encompass you and you feel a pair of wings arc over your back\.  With the last words of your chant, you open your eyes and watch as foggy wings rise above you and gently brush against [A-Z][a-z]+\.  As they dissipate in a cold rush against [A-Z][a-z]+, you feel a surge of power spill forth from you and into (?:him|her)\.</message>
      <message type='start'>Low and monotonous, you begin a chant to draw [A-Z][a-z]+ back to life and feel the deep shadows of the area rise to meet you\.  Falling upon you like a cloak of darkness, the twisting, inky blackness transforms into the visage of a jackal from a once-forgotten nightmare\.  Sweeping from your body into [A-Z][a-z]+'s?, the raw energy of your prayer transfers into (?:his|her) prone form\.  Slowly, the shadows recede back into the surrounding area\.</message>
      <message type='end'>The feeling of weakness leaves you\.  Your spirits are somewhat rejuvenated\.</message>
   </spell>
   <spell availability='all' name='Adrenal Surge Cooldown' number='9010' type='timer'>
      <duration>if Spell[9010].active?; Spell[9010].timeleft; else; 5; end</duration>
      <message type='start'>You feel a surge of energy that carries you to your feet in a heartbeat, with no sense of effort whatsoever!</message>
      <message type='start'>You feel a momentary surge of energy rush through you giving you strength\.</message>
      <message type='start'>You feel a surge of energy shoot through you!</message>
   </spell>
   <spell availability='self-cast' name='Council Task' number='9011' type='timer'>
      <duration persist-on-death='yes' real-time='yes'>if defined?(line) and line.slice(/[0-9]+/).to_f > 0; line.slice(/[0-9]+/).to_f; else; 30; end</duration>
      <message type='start'>The High Taskmaster looks at you, consults her notes, and then announces in a loud voice: &quot;[A-Z][a-z]+, I&apos;m rather busy right now\.  I know you have completed the requirements for advancement in rank, but I cannot take the time to instruct you\.  Let me check my schedule\.\.\. Ah, yes, I can squeeze you in in [0-9]+ minutes or so\.  Come back then and I&apos;ll take care of you\.&quot;</message>
   </spell>
   <spell availability='self-cast' name='Council Punishment' number='9012' type='timer'>
      <duration persist-on-death='yes'>if defined?(line) and (line =~ /[0-9]+/); line.slice(/[0-9]+/).to_f; else; 20; end</duration>
      <message type='start'>powers for [0-9]+ minutes, so that you might have</message>
      <message type='start'>Your punishment does not end for another [0-9]+ minutes?\.</message>
      <message type='end'>the fold\.  DO NOT FAIL ME AGAIN!&quot;</message>
   </spell>
   <spell availability='self-cast' name='Fog Concealment' number='9013' type='timer'>
      <duration>0.5</duration>
      <message type='start'>Fog swirls and eddies about the area\.  Wispy grey tendrils writhe as they climb around your form until you are completely enshrouded in the mist\.  You feel confident that no one can see you behind your mask of fog\.</message>
      <message type='end'>The fog enshrouding you drifts off your form and gathers with the rest in the area\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Wolf' number='9014' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume wolf&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Wolf\.  .*Your vision takes on a slightly yellow hue, and you feel a stronger center of coordination and balance\.</message>
      <message type='end'>The golden distortion fades from your sight, and your balance returns to normal\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Wolf Cooldown' number='9015' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Jackal' number='9016' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume jackal&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Jackal\.  .*A twinge of red passes through your eyes, as your thoughts turn toward waylaying your next quarry\.</message>
      <message type='end'>The redness fades from your eyes as your focus of the hunt returns to normal\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Jackal Cooldown' number='9017' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Lion' number='9018' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume lion&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Lion\.  .*You feel yourself infused with a regal air, as a wave of power ripples through your muscles\.</message>
      <message type='end'>Your regal influence and extra strength swiftly drift away\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Lion Cooldown' number='9019' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Panther' number='9020' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume panther&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Panther\.  .*A distinct awareness of the shadows surfaces to your thoughts, springing forth with the lucidity of a once-forgotten memory\.</message>
      <message type='end'>Your extra awareness of the shadows steals away back into the recesses of your subconscious\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Panther Cooldown' number='9021' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Owl' number='9022' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume owl&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Owl\.  .*A dawn of enlightenment rises over your consciousness, honing your comprehension of the flows of magic around and within you\.</message>
      <message type='end'>The moment of enlightenment and magical comprehension fades from your mind\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Owl Cooldown' number='9023' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Hawk' number='9024' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume hawk&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Hawk\.  .*You become more aware of the environs as every nuance of your surroundings comes into focus with sharp clarity\.</message>
      <message type='end'>The degree of resolution in your vision diminishes as your perception returns to normal\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Hawk Cooldown' number='9025' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Rat' number='9026' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume rat&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Rat\.  .*Your thoughts drift inward, girding your mind with a strong determination and your body with great agility\.</message>
      <message type='end'>The strong sense of determination and agility fades from within you\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Rat Cooldown' number='9027' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Porcupine' number='9028' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume porcupine&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Porcupine\.  .*A simple cognition bubbles to the front of your mind, broadening your understanding of events that previously went unnoticed\.</message>
      <message type='end'>Your increased cognition fades away, returning your comprehension to normal\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Porcupine Cooldown' number='9029' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Bear' number='9030' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume bear&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Bear\.  .*You hear a deep bellowing reverberate through your mind, inspiring an invigorating fortitude that spreads to your very core\.</message>
      <message type='end'>Your ursine fortitude parts, returning your endurance to normal\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Bear Cooldown' number='9031' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Serpent' number='9032' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume serpent&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Serpent\.  .*Your skin suddenly feels a bit more scaled, and you notice a distinctly natural fluidity in your movements\.</message>
      <message type='end'>The scaliness of your complexion fades away, taking with it your natural-feeling fluid movements\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Serpent Cooldown' number='9033' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Burgee' number='9034' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume burgee&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Burgee\.  .*Grey-green diamond scales form across your skin, and you note that your shield arm feels somehow lighter\.</message>
      <message type='end'>The grey-green scales fade away from your skin, with your shield arm,s reflexes returning to normal\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Burgee Cooldown' number='9035' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Mantis' number='9036' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume mantis&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Mantis\.  .*A slightly uncomfortable pressure builds behind your eyes as you note an improved eyesight and renewed vigor in your weapon arm\.</message>
      <message type='end'>You feel the pressure behind your eyes relent, as the movement in your weapon arm returns to normal\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Mantis Cooldown' number='9037' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Yierka' number='9038' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume yierka&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Yierka\.  .*A gruff, yet contenting inspiration courses through your senses, putting you at one with the offerings and spirits of nature\.</message>
      <message type='end'>Your extra illumination of the natural fades with a final wisp of inspiration\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Yierka Cooldown' number='9039' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='self-cast' name='AA: Spider' number='9040' type='timer'>
      <duration>2</duration>
      <cost type='mana'>Spell[650].active ? 25 : 50</cost>
      <cast-proc>Spell[650].cast if not Spell[650].active?; waitcastrt?; (dothistimeout &apos;assume spider&apos;, 3, /^You feel that you will not be able to fully concentrate upon the Aspect|^You concentrate your focus upon the Aspect/) =~ /^You concentrate/ ? true : false</cast-proc>
      <message type='start'>You concentrate your focus upon the Aspect of the Spider\.  .*You feel a tingling sensation shiver through your limbs as your field of vision darkens and expands\.</message>
      <message type='end'>Your field of vision returns to normal as the tingling sensation in your limbs scatters away\.</message>
   </spell>
   <spell availability='self-cast' name='AA: Spider Cooldown' number='9041' type='timer'>
      <duration>4</duration>
   </spell>
   <spell availability='all' name='Meditation' number='9075' type='timer'>
      <duration>12</duration>
      <message type='start'>You (?:kneel down and |kneel and )?begin to meditate on your lot in life\.</message>
      <message type='end'>Your action interrupts your meditation\.</message>
      <message type='end'>Your meditation is interrupted by .+\.</message>
      <message type='end'>The lingering effects of your meditation fade away\.</message>
   </spell>
<!--
   <spell availability='all' name='Pre-Meditate' number='9042' type='timer'>
      <duration>2</duration>
      <message type='start'>You kneel (?:down )?and begin to meditate on your lot in life\.</message>
      <message type='end'>Your action interrupts your meditation\.</message>
      <message type='end'>Your meditation is interrupted by .+\.</message>
   </spell>
   <spell availability='all' name='Meditate' number='9043' type='timer'>
      <duration>10</duration>
      <message type='start'>You wake from your meditation, yet a deep feeling of relaxation remains present\.</message>
      <message type='end'>The lingering effects of your meditation fade away\.</message>
   </spell>
-->
   <spell availability='all' name='Miracle Cooldown' number='9044' type='timer'>
      <duration max='1440.0' persist-on-death='yes' real-time='yes'>dur = 1440; [ 4, 9, 15, 22, 30, 39, 49, 60, 72, 85, 99, 114, 130, 147, 165, 184 ].each { |num| dur -= 60 if Skills.slreligion &gt;= num }; dur</duration>
      <message type='start'>Spidery and incomprehensible words reach you, and are given life by an aged, bodiless voice that carries with it the scent of dusty tomes and candle tallow\.  A point of dark light appears high over your body and expands to form a yellowed eye with a slit pupil\.  With each uttered syllable the eye&apos;s iris contracts and the meaning of the words that wrap you become clear\.  &quot;You still have much more to learn,&quot; they say, and before you the eye explodes in a blinding, fiery light\.</message>
      <message type='start'>You feel a tingling at the edges of your perception and the air comes alive with a feeling of raw power\. You sense something greater than yourself tugging on your spirit\. As the power grows in intensity, you feel it draw you closer to your lifeless body and you marvel as it ushers your spirit forward\. An extremely bright nimbus floods you as your spirit sinks into your body, which begins to fill with life\.</message>
      <message type='start'>Silence descends upon the room and a double\-headed serpent slithers to you\. Each of its heads moves of its own accord, and slit\-pupiled eyes take in everything as they wind a sinuous path up your prone form\. As it reaches your chest, it lifts its heads up high and begins to sway from side to side in a hypnotic pattern\. &quot;You have learned the ssssacrifice issss everything, now we ssssacrifice oursssselves sssso that you may teach otherssss,&quot; the one head says before striking the other head at the neck\. In one swift, painless bite, the head is severed and the open neck falls upon you, its lifeblood draining into your mouth\. Moments pass as the ferric taste of the serpent&apos;s sacrifice fills you, and then suddenly it disappears\.</message>
      <message type='start'>As the air stirs, you feel your spirit drawn to the heavy scent of the ocean and feel a deep sense of peace\. Clouds move into the area, their murky depths heavy with rain unshed and you can see lightning dancing within them\. The pressure builds all around you until suddenly, the heavens release dozens of slender blue bands of lightning\. The lightning fills your body with its energy and the very air around you seems to tingle with it\. Moments later, the lightning is gone and the clouds soon follow\.</message>
      <message type='start'>Odd whirls and metallic clangs herald the arrival of a dwarf crafted entirely of bronze\. The strange, mechanical man moves with jerky movements to a position beside the prone form of Cleric and begins to tinker with his appearance and clothing\. At first, nothing seems to come of the strange bronze creature&apos;s meddling, but slowly color returns to Cleric&apos;s face\. Steam billowing from its ears, the metallic dwarf straightens and teeters from the area, dissipating as it moves\.</message>
      <message type='start'>Stealing all sound as it travels to you, a soft zephyr gently caresses your skin and you sense the frigid brush of final death near at hand\. A tug on your spirit heralds the arrival of impossibly long feathers in shades of white, grey, and black, as they appear before you and coalesce into a beautiful insubstantial being\. It lifts you up into its arms and you feel as if you have found home in its embrace\.</message>
      <message type='start'>Filling your spirit with a deep anger, a long discordant horn blast drowns your senses and sets your lifeless flesh to vibrating with its wild call\. An enormous hunting hound bearing an angry look of focus bounds towards you\. You feel its front paws forcibly slam into your chest and watch the beast disappear deep within you with the cry of a wild hunt falling from its parted lips\. Slowly, the sound of the horn echoes into silence\.</message>
      <message type='start'>Time stills around you, and you feel your spirit drawn forward by a pale ethereal light which quickly transforms into a translucent woman\. She moves to your side and withdraws two crimson oak leaves and an acorn from her basket\. You hear her soft prayer as she places the leaves upon your eyes and presses the acorn past your lips\. She turns her eyes to the sky, her arms rising in supplication, and then lays her hands briefly on your chest\. Instantly, warmth floods your limbs and the woman returns to the pale light\.</message>
      <message type='start'>Large and ethereal, rectangular talismans rise from the ground to form a ring around your lifeless form\. Each talisman is carved with a different word and glows with a brilliant light\. One by one, the talismans tumble into you\. As the first falls upon you, you are filled with a deep sense of Honor, the second reminds you of Valor in battle, and the third causes your spirit to surge with Hope, while the fourth binds you with the strength of your Faith\. The remaining two tumble into you simultaneously and, in a flash of white light, you absorb them all\.</message>
      <message type='start'>Creating a myriad of colorful whorls in the air, a flock of small rainbow-winged lizards swirls towards you and you are filled with a deep connection to them\. Diving and darting, they cavort above your corpse in an intricate dance that is breathtaking to behold\. As they dance, their wings shimmer and shed multi-colored sparks that rain down upon your body\. With each spark that alights upon your flesh, you are filled with a tingling sensation that draws your spirit deep into your body\. The aerial display ends in one final loop and the rainbow\-winged lizards dart off into the distance, only to wink out of sight a moment later\.</message>
      <message type='start'>Your spirit feels a sudden stirring in the air above your lifeless body and moments later a brilliantly white owl appears out of nowhere\. It spreads its wings and you hear the audible crack of the air as they expand, lifting the owl in a lazy spiral above you\. The bird&apos;s unblinking gaze falls upon you and you feel a deep connection with it before it gives three mighty beats of its wings and surges high into the sky and disappears\.</message>
      <message type='start'>Distant and echoing, the sound of keys jingling strikes a familiar chord within you as it precedes the sound of a heavy metal gate slamming shut\. Pale snowflakes drift through the air and settle upon your lifeless body\. As the snow accumulates into a thin, chilling layer, you distinctly hear the somber voice of a female speaking softly in your ear\. &quot;The gates are closed to you for now, my child,&quot; she says, and several moments later the snow seeps into your skin, leaving you chilled and damp\.</message>
      <message type='start'>Punctuating the sudden calm of the area, the sound of slithering is quickly followed by a long, sibilant hiss\. Winding a sinuous pattern to your head, an impossibly large copper-head snake with emerald green eyes begins to hiss at you\. &quot;There are more liessss to sssspread, and deathssss to ssssteal,&quot; it says, and then swiftly raises high into the air to gaze down at you\. Faster than the blink of an eye, the serpent dives into your chest and disperses into a shimmering green mist that seeps into your skin\.</message>
      <message type='start'>Dark clouds swirl across your prone form and the area is plunged into darkness\. The hair on your body stands on end and a deep pressure builds around your spirit, threatening to consume it\. Blue lightning lances through the air, heralding an ear-shattering ripple of thunder, and at the edge of your senses you feel the demonic horde surging forward to take you\. Each sizzling bolt strikes your chest repeatedly for several moments and the horde closes in on you until every last one of them is absorbed by your spirit\.</message>
      <message type='start'>Wraithlike mourners suddenly slip free of the shadows and form a tight ring around you\. Silvery tears slip from their faces to splash ineffectively against your lifeless body, and the blood that stains their white garments trickles in a splash across your face\. They kneel in a tight ring about you, obscuring your view of the world beyond, and you feel a deep connection to them\. &quot;There is yet more pain to release,&quot; they seem to tell you before their lips part in a deafening keen of anguish that shatters their ethereal forms\.</message>
      <message type='start'>A playful feeling sweeps over you as a fuzzy pair of otters fills your vision\. Clutched in their teeth are midnight blue mussels, which they hold tightly in place as they comically bounce and leap around you\. They playfully paw at your lifeless chest, begging with their furry faces, and you sense they want you to come and play\. As if sensing you cannot, they curl their sleek, wet forms briefly around your head and nuzzle against your neck for several moments\. Then, they carefully drop the mussels upon your chest\. A brief, child-like joy fills you as the mussels sink into your lifeless body, and the otters turn as one to slide out of sight on their slippery bellies\.</message>
      <message type='start'>Shadows slant across the ground as they slither toward you and a deep chill touches your spirit\. As the shadows writhe in a thick mass of darkness over your body, you distinctly hear a quiet whisper in your ear, &quot;This was not the death I had in mind for you\.&quot; A flash of light tears across your vision as it is consumed by the image of a cracked white skull\.</message>
      <message type='start'>Regal and proud, a broad-shouldered ethereal lion strides towards your lifeless form and you are filled with a sense of power and glory\. As it moves towards you, its mane begins to shimmer with licking flames that resemble the rays of the sun\. It lowers its gaze to you and you feel yourself drawn into their amber depths\. The golden beast lifts a paw to your chest and a wave of warmth floods your limbs\. As the light grows, the lion begins to dissipate into a golden nimbus that sinks into your body\.</message>
      <message type='start'>The sounds of night drift to your ears and you feel a deep lassitude flood your spirit\. At the edge of your vision the pale white beautiful image of a unicorn begins to take shape\. It paws at the air, its silver hooves creating sparks of light that twinkle like a thousand stars\. As it lowers the horn to touch your forehead you feel a deep sense of peace that intensifies as a silver nimbus blankets you\. The unicorn and the nimbus disappear at once, and you feel yourself waking slowly from a dream\.</message>
      <message type='start'>Shadows lengthen and grow around you until their edges are sharp and twisted\. Macabre and ungraceful, they slink with jerky movements toward you as their depths are briefly illuminated by countless yellowed eyes set into the faces of a thousand horrors\. They snarl as they writhe across your prone form, their maws snapping ineffectively at your flesh\. One by one, they twist and squirm into your slack jaw and fill you with bitter madness\.</message>
      <message type='start'>Silver motes of light cavort upon the air, their movements turning into a twisted dance that is punctuated by the sound of dozens of laughing voices\. Deep in your spirit, you feel a binding connection to their mirth\. Converging above you, the light transforms in a slender crescent moon that begins to whirl\. At one moment, full, and then the next, a sliver, the faster the moon spins, the louder the laughter gets\. Suddenly, the light ceases all movement and explodes into a brilliant shower of silver sparks accompanied by laughter for several moments\.</message>
   </spell>
   <spell availability='all' name='Sigil of Escape Cooldown' number='9045' type='timer'>
      <duration max='1440.0' persist-on-death='yes' real-time='yes'>1440</duration>
      <message type='start'>Your incapacitation makes it all the more difficult, but as you concentrate \(as best you can\) on your sigil, you feel yourself being whisked away\.\.\.</message>
   </spell>
   <spell availability='all' name='Regeneration Cooldown' number='9046' type='timer'>
      <duration max='1440.0' persist-on-death='yes' real-time='yes'>1440</duration>
      <message type='start'>Points of silvery light begin to flicker around you\. They grow in number, swirling into a bright flash as your injuries heal to scars, then gradually fade completely\. Dimming slowly, the light settles into a shimmering silver cocoon that surrounds you\.</message>
   </spell>
   <spell availability='all' name='Lantern Charm Cooldown' number='9047' type='timer'>
      <duration max='1440.0' persist-on-death='yes' real-time='yes'>1440</duration>
      <message type='start'>The flame within the lantern builds and brightens, escalating rapidly from bright to blinding\.  A heady rush overcomes you as the charm&apos;s radiance suffuses your flesh and falls, like a glowing veil, over your vision\.  Heat blossoms within your core, and a soft voice promises, &quot;While hearth and home are firm in your heart, they cannot be more than a breath away from your lungs\.&quot;</message>
   </spell>
   <spell availability='all' name='Symbol of Mana Cooldown' number='9048' type='timer'>
      <duration max='5.0' persist-on-death='yes'>5</duration>
      <message type='start'>You call upon a special blessing from Koar\.</message>
      <message type='end'>You feel Koar&apos;s blessing return to you\.</message>
   </spell>
   <spell availability='all' name='Symbol of Transcendence Cooldown' number='9049' type='timer'>
      <duration persist-on-death='yes'>if $infomon_transcendance_emergency; 10; else; 3; end</duration>
      <message type='start'>You feel yourself being pulled back fully into the corporeal realm\.</message>
   </spell>
   <spell availability='all' name='Symbol of Renewal Cooldown' number='9050' type='timer'>
      <duration>2</duration>
      <message type='start'>You feel a surge of life flow through you\.</message>
      <message type='end'>You feel your connection to the vitality of nature renew itself once more\.</message>
   </spell>
   <spell availability='self-cast' name='Burst of Swiftness Cooldown' number='9051' type='timer'>
      <duration>dur = { nil =&gt; 5, 1 =&gt; 5, 2 =&gt; 4, 3 =&gt; 3, 4 =&gt; 2.5, 5 =&gt; 2 }; if defined?(CMan); dur[CMan.burst_of_swiftness]; else; 5; end</duration>
      <message type='start'>You feel (?:significantly|a great deal|a fair amount) more agile\.</message>
      <message type='end'>You feel entirely capable of preparing yourself to once again move swiftly at a moment&apos;s notice\.</message>
   </spell>
  <spell availability='self-cast' name='Duck and Weave Cooldown' number='9052' type='timer'>
      <duration>5</duration>
      <message type='start'>You balance your posture and narrow your eyes, preparing to misdirect your foes' attacks\.</message>
      <message type='end'>Your recent exploits of weaving through your foes' attacks no longer strains your body and mind\.</message>
   </spell>
   <spell availability='self-cast' name='Curse of the Star (bonus)' number='9053' type='timer'>
      <duration span='stackable'>20</duration>
      <message type='start'>You acquire a certain murky complexion, and you feel more deft\.</message>
      <message type='start'>Your complexion grows murkier\.</message>
      <message type='end'>Your murky complexion fades away, and you feel less deft\.</message>
   </spell>
   <spell availability='self-cast' name='Doomstone Curse' number='9054' type='timer'>
      <duration span='refreshable'>60</duration>
      <message type='start'>You feel a strange, foreboding sensation as your hand touches the black doomstone\.</message>
      <message type='end'>The foreboding sensation recedes\.</message>
   </spell>
   <spell availability='self-cast' name='Divine Word Cooldown' number='9055' type='timer'>
      <duration persist-on-death='yes' real-time='yes' span='refreshable'>if Skills.slreligion >= 40; 480; elsif Skills.slreligion >= 20; 720; else 1440; end</duration>
      <message type='start'>Your surroundings grow dim\.\.\.you lapse into a state of awareness only, unable to do anything\.\.\.</message>
   </spell>
   <spell availability='all' name='Planar Fragment Cooldown' number='9057' type='timer'>
      <duration max='5760.0' persist-on-death='yes' real-time='yes'>5760</duration>
      <message type='start'>Shifting your gaze, you use the fragment&apos;s influence to pierce the veil between the planes of existence\.  An other-worldly landscape fills your vision, and you sense an object of potential interest within arms reach\.  Without waiting to actually see it, you reach out and yank .+ into your current temporal sphere\.</message>
   </spell>
   <spell availability='all' name='Chronomage Teleport Staff Cooldown' number='9058' type='timer'>
      <duration max='1440.0' persist-on-death='yes' real-time='yes'>1440</duration>
      <message type='start'>When the air around you settles and your mind calms, you realize that your very existence has been catapulted into the past\.  The sand in the hourglass is now in the upper bulb, trickling slowly into the lower chamber\.</message>
   </spell>
   <spell availability='self-cast' name='Tangleweed Vigor' number='9059'>
      <duration span='refreshable'>2</duration>
      <message type='start'>Thin tendrils of vine twine around you, instilling you with their strength\.|The vigor of your vine surges through you, imparting the strength leached from your foe\.|A runner from your vine brushes against you and you feel strengthened by the contact\.|Strength surges into you from your vine\!</message>
      <message type='end'>A few withered tendrils of vine fall away from you, taking their gift of strength with them\.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (acid)' number='9060' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (acidic) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (cold)' number='9061' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (freezing) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (crush)' number='9062' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (crushing) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (disintegration)' number='9063' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (disintegrating) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (disruption)' number='9064' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (disruptive) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (electrical)' number='9065' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (electrical) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (grapple)' number='9066' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (grappling) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (fire)' number='9067' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (burning) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (impact)' number='9068' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (impacting) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (plasma)' number='9069' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (plasmatic) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (puncture)' number='9070' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (puncturing) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (slash)' number='9071' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (slashing) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (steam)' number='9072' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (scalding) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (unbalance)' number='9073' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (unbalancing) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Meditative Resistance (vacuum)' number='9074' type='defense'>
      <duration persist-on-death='no' span='refreshable'>250</duration>
      <message type='start'>You assume a meditative posture, .+ (decompressing) .+\.</message>
      <message type='end'>Your concentration slips, and you no longer feel prepared to resist \w+ damage.</message>
      <message type='end'>You cease concentrating on your preparations to resist \w+ damage.</message>
   </spell>
   <spell availability='self-cast' name='Tracking Recovery' number='9076' type='timer'>
      <duration>1</duration>
      <message type='start'>You carefully study the area, searching for signs of .+ presence\.  Your keen eye spots the beginnings of a trail and you rush to follow it while taking care to remain hidden\.</message>
      <message type='start'>You carefully study the area, searching for signs of .+ presence\.  Your keen eye spots the beginnings of a trail and you rush to follow it\.</message>
      <message type='start'>You carefully study the area, searching for signs of .+ presence\.  You can tell the .+ is somewhere nearby but the paths all seem to lead in different directions\.  You take a chance on one, but quickly realize you've been led astray\.</message>
      <message type='start'>You carefully study the area, searching for signs of .+ presence\.  You can tell the .+ is somewhere nearby but the paths all seem to lead in different directions\.  You take a chance on one while taking care to remain hidden, but quickly realize you've been led astray\.</message>
      <message type='end'>You feel refreshed and ready to track again\.</message>
   </spell>
   <spell availability='self-cast' name='Lumnis&#39; Repose' number='9077' type='timer'>
      <duration>30</duration>
      <message type='start'>You trace the central orb of white in your brooch and your fingertips begin to tingle as ordered energy flows into you\.  Within seconds, you feel Lumnis' Repose course through your veins\.</message>
      <message type='end'>Your skin tingles as the ordered energy of Lumnis' Repose slips from you and recedes into your brooch\.</message>
   </spell>
   <spell availability='all' name='Elemental Aura Stabilization' number='9078' type='defense'>
      <duration>5</duration>
      <message type='start'>Elemental energy wraps around you, stabilizing your aura\.</message>
      <message type='end'>The elemental energy stabilizing your aura dissipates\.</message>
   </spell>
   <spell availability='all' name='Elemental Transfer Protection' number='9079' type='defense'>
      <duration>5</duration>
      <message type='start'>A thin coating of elemental energy sinks into you, keeping minor fluctuations in elemental energy at bay\.</message>
      <message type='end'>Your thin coating of elemental energy dissipates away\.</message>
   </spell>
   <spell availability='all' name='Feather Charm' number='9080' type='utility'>
      <duration>30</duration>
      <message type='start'>Oddly enough, you feel somewhat more buoyant\.</message>
      <message type='end'>You feel somewhat less buoyant\.</message>
   </spell>
   <spell availability='all' name='Encumbrance Boost' number='9081' type='utility'>
      <duration>15</duration>
      <cast-proc>fput &apos;boost encumbrance&apos;</cast-proc>
      <message type='start'>\[You have activated an Encumbrance Boost.  Your net encumbrance will be reduced by 50 lbs for 15 minutes\.\]</message>
      <message type='end'>\[Your Encumbrance Boost has ended\.\]</message>
   </spell>
   <spell availability='all' name='Doubled Experience Boost' number='9082' type='utility'>
      <duration>15</duration>
      <cast-proc>fput &apos;boost experience&apos;</cast-proc>
      <message type='start'>\[You have activated a Doubled Experience Booster!  You will absorb twice as much experience for 15 minutes\.\]</message>
      <message type='end'>\[Your Doubled Experience Boost has ended\.\]</message>
   </spell>
   <spell availability='all' name='Luck Boost' number='9083' type='utility'>
      <duration>15</duration>
      <cast-proc>fput &apos;boost luck&apos;</cast-proc>
      <message type='start'>\[You have activated a Luck Booster!  Your attack rolls will be a little extra lucky for 15 minutes\.\]</message>
      <message type='end'>\[Your Luck Boost has ended\.\]</message>
   </spell>
   <spell availability='all' name='Item Supercharger' number='9084' type='utility'>
      <duration>15</duration>
      <cast-proc>fput &apos;boost supercharge&apos;</cast-proc>
      <message type='start'>\[You have activated an Item Supercharger!  Your combat properties of your items will be super charged for 15 minutes\.\]</message>
      <message type='end'>\[Your Item Supercharger has ended\.\]</message>
   </spell>
   <spell availability='all' name='Enhancive Stats Boost' number='9085' type='utility'>
      <duration>15</duration>
      <cast-proc>fput &apos;boost enhancive stats&apos;</cast-proc>
      <message type='start'>\[You have activated an Enhancive Stats Boost.  You will be boosted for 15 minutes\.\]</message>
      <message type='end'>\[Your Enhancive Stats Boost has ended\.\]</message>
   </spell>
   <spell availability='all' name='Enhancive Recovery Boost' number='9086' type='utility'>
      <duration>15</duration>
      <cast-proc>fput &apos;boost enhancive recovery&apos;</cast-proc>
      <message type='start'>\[You have activated an Enhancive Recovery Boost.  You will be boosted for 15 minutes\.\]</message>
      <message type='end'>\[Your Enhancive Recovery Boost has ended\.\]</message>
   </spell>
   <spell availability='all' name='Gift of Eonak' number='9087' type='utility'>
      <duration>15</duration>
      <cast-proc>fput &apos;boost gift eonak&apos;</cast-proc>
      <message type='start'>\[You have activated a Gift of Eonak!  You will have an advantage on crafting skill rolls for 15 minutes\.\]</message>
      <message type='end'>\[Your Gift of Eonak has ended\.\]</message>
   </spell>
   <spell availability='self-cast' name='Major Loot Boost' number='9100' type='utility'>
      <duration persist-on-death='yes'>15</duration>
      <cast-proc>fput &apos;boost loot major&apos;</cast-proc>
      <message type='start'>\[You have activated a Major Loot Boost\.  Your chances for better LOOT will be boosted for 15 minutes\.\]</message>
      <message type='end'>\[Your Major Loot Boost has ended\.\]</message>
   </spell>
   <spell availability='self-cast' name='Minor Loot Boost' number='9101' type='utility'>
      <duration persist-on-death='yes'>15</duration>
      <cast-proc>fput &apos;boost loot minor&apos;</cast-proc>
      <message type='start'>\[You have activated a Minor Loot Boost\.  Your chances for better LOOT will be boosted for 15 minutes\.\]</message>
      <message type='end'>\[Your Minor Loot Boost has ended\.\]</message>
   </spell>
   <spell availability='self-cast' name='Mana Leech Recovery' number='9516' type='timer'>
      <duration persist-on-death='yes' span='stackable'>1</duration>
      <message type='start'>You feel a sudden rush of power as you absorb [0-9]+ mana!</message>
      <message type='end'>You no longer feel the effect of casting mana leech\.</message>
   </spell>
  <spell availability='self-cast' name='Duck and Weave Cooldown' number='9052' type='timer'>
      <duration>5</duration>
      <message type='start'>You balance your posture and narrow your eyes, preparing to misdirect your foes' attacks\.</message>
      <message type='end'>Your recent exploits of weaving through your foes' attacks no longer strains your body and mind\.</message>
   </spell>
   <spell availability='self-cast' name='Absorb Magic' number='9655' type='utility'>
      <duration>10/60.0</duration>
      <cast-proc>fput &quot;cman absorb magic&quot;</cast-proc>
      <message type='start'>You open yourself to the ravenous void at the core of your being, allowing it to surface\.  Muted veins of metallic grey ripple just beneath your skin\.</message>
      <message type='end'>The hunger of the void retreats within you, unsatisfied\.</message>
   </spell>
   <spell availability='self-cast' name='Absorb Magic Recovery' number='9656' type='timer'>
      <duration>30/60.0</duration>
      <message type='start'>You open yourself to the ravenous void at the core of your being, allowing it to surface\.  Muted veins of metallic grey ripple just beneath your skin\.</message>
      <message type='end'>Something within you loosens, and you can once again feel the hunger of the void within\.</message>
   </spell>
   <spell availability="self-cast" name="Focused" number="2001" type="utility">
      <duration span="refreshable" max="2">2</duration>
      <message type="start">You focus intently on your picking and disarm skill.</message>
      <message type="end">You no longer appear focused.</message>
   </spell>
   <spell availability="self-cast" name="Weapon Flurry" number="9657" type="timer">
      <duration>20</duration>
      <message type="start">You rotate your wrist, your .+ executing a casual spin to establish your flow as you advance upon .+!</message>
      <message type="end">The mesmerizing sway of body and blade glides to its inevitable end with one final twirl of your .+\.</message>
      <message type="end">Distracted, you hesitate, and your assault is broken\. You give the blade of your .+ a quick, sweeping flick of annoyance as you lower it\.</message>
   </spell>
   <spell availability="self-cast" name="Weapon Thrash" number="9658" type="timer">
      <duration>20</duration>
      <message type="start">You rush .+, raising your .+ high to deliver a sound thrashing!</message>
      <message type="end">With a final, explosive breath, you pull your .+ back to a ready position\.</message>
      <message type="end">Distracted, you hesitate, and in doing so lose the rhythm of your assault\. You pull your .+ back to a ready position with a wary eye to your environs\.</message>
   </spell>
   <spell availability="self-cast" name="Weapon Guardant Thrusts" number="9659" type="timer">
      <duration>20</duration>
      <message type="start">Retaining a defensive profile, you raise your .+ in a hanging guard and prepare to unleash a barrage of guardant thrusts upon a .+!</message>
      <message type="end">You complete your assault, your weight on your rear foot as you snap your .+ back to a defensive angle\.</message>
      <message type="end">Distracted, you hesitate, and in doing so lose the rhythm of your assault\. You shift your grip on your .+ to a more neutral position and watch for new opportunities\.</message>
   </spell>
</list>
